import{d as message,bI as useSearchParams,j as jsxRuntimeExports,aK as MenuTrigger,I as IconButton,B as Button,T as Trans,aL as Menu,h as Item,c as clsx,a1 as Link,bJ as useCookie,r as reactExports,aI as SiteConfigContext,b as createSvgIcon,i as useTrans,bK as useClipboard,t as toast,bL as FacebookIcon,bM as TwitterIcon,b6 as FormattedRelativeTime,bN as LockIcon,A as AnimatePresence,m,o as opacityAnimation,aB as useParams,a5 as FormattedDate,bO as hashKey,as as useQuery,b7 as keepPreviousData,w as apiClient,aM as $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c,aH as LinkStyle,z as IllustratedMessage,E as SvgImage,bs as getBootstrapData,aC as useNavigate,bi as ComboBoxForwardRef,l as SearchIcon,N as Navbar,a6 as Tooltip,bv as lazyLoader,u as useSettings,bP as useAuth,bH as Footer,bl as PageMetaTags,b4 as PageStatus,e as useIsMobileMediaQuery,D as DialogTrigger,a7 as ButtonBase,bQ as useImageSrc,Z as useForm,_ as Form,a0 as FormTextField,p as useMutation,v as showHttpErrorToast,at as useLocation,y as ConfirmationDialog,ak as Skeleton,bR as useLocalStorage,a4 as Chip,q as queryClient,a2 as CheckIcon,bS as FormattedCurrency,aF as useQueryClient,aV as $df56164dff5785e2$export$4338b53315abf666,k as TextField,bT as useDarkThemeVariables,bh as PageErrorMessage,x as useDialogContext,n as StaticPageTitle,ao as useFieldArray,a3 as CloseIcon,K as onFormQueryError,ae as useValueLists,F as Dialog,G as DialogHeader,H as DialogBody,ax as FileUploadProvider,ac as FormImageSelector,am as FormSelect,J as DialogFooter,aS as memoize,b1 as isAbsoluteUrl,O as Outlet,by as useRoutes,bw as AuthRoute,bz as NotFoundPage}from"./main-f444f7c5.js";import{bb as useChannelQueryParams,aQ as useInfiniteData,bc as channelQueryKey,bd as channelEndpoint,a3 as channelContentConfig,be as Sort,aP as SortIcon,b as KeyboardArrowRightIcon,bf as GridViewIcon,ae as UserAvatar,bg as BaseMediaLink,bh as getBaseMediaLink,u as useBackendFilterUrlParams,ay as useTitleIndexFilters,A as AddFilterButton,z as TuneIcon,e as FilterListSkeleton,f as FilterList,a0 as TITLE_MODEL,a1 as MOVIE_MODEL,a2 as SERIES_MODEL,b2 as FormattedDateTimeRange,ab as NewsArticleImage,ac as NewsArticleLink,ah as BulletSeparatedItems,al as TitlePoster,aw as TitleLink,ag as TitleRating,aN as TitleBackdrop,bi as NEWS_ARTICLE_MODEL,a_ as PERSON_MODEL,aW as PersonPoster,aY as PersonLink,aI as InfiniteScrollSentinel,K as KeyboardArrowLeftIcon,W as ChevronLeftIcon,aR as MediaPlayIcon,am as getWatchLink,aZ as KnownForCompact,bj as FormattedDuration,bk as InteractableRating,bl as CHANNEL_MODEL,b1 as todoImage,bm as getPersonLink,aC as getTitleLink,y as dot,aD as useScrollToTop,Z as useChannel,R as ImageZoomDialog,bn as ArrowForwardIcon,aK as useTitleSeasons,aL as SeasonPoster,aM as SeasonLink,bo as useCreateReview,V as Avatar,ai as StarSelector,bp as useAuthClickCapture,af as useDeleteReviews,M as MoreVertIcon,bq as useReviews,ak as ReviewListSortButton,br as getEpisodeLink,bs as VideoGrid,aG as useSeasonEpisodes,an as CompactSeasonEpisode,b5 as EpisodePoster,p as ChipList,i as AddIcon,az as useTitle,aE as useSeason,aH as EpisodeListItem,bt as getSeasonLink,aV as useEpisode,ao as FormattedNumber,ad as useDeleteComments,b7 as EpisodeLink,bu as VideoGridItemSkeleton,bv as VideoGridItem,bw as EpisodeSelector,bx as MediaEpisodesIcon,au as SiteVideoPlayer,at as VideoPlayerSkeleton,aS as VideoThumbnail,r as Accordion,s as AccordionItem,a$ as usePerson,b0 as useNewsArticle,L as Tabs,O as TabList,P as Tab,b8 as TitleLinkWithEpisodeNumber,by as StarIcon,b6 as UserProfileLink,b9 as CreateUserListPage,ba as EditUserListPage}from"./user-profile-link-c5f5adbb.js";import{L as LockOpenIcon,S as ShareIcon,E as ExpandMoreIcon,T as ThumbUpIcon,a as ThumbDownIcon,R as ReplyIcon,C as CommentIcon,F as FlagIcon,b as ListAltIcon,c as RateReviewIcon,B as BookmarkBorderIcon}from"./BookmarkBorder-15eeac1c.js";import{C as ChevronRightIcon,O as OpenInNewIcon,E as EditIcon,B as Breadcrumb,a as BreadcrumbItem}from"./OpenInNew-ae355b91.js";import{O as Options,t as tokenize}from"./linkify.es-ff711e62.js";function usePaginatedChannelContent(e){const s=useChannelQueryParams(e);return useInfiniteData({willSortOrFilter:!0,initialPage:e.content,queryKey:channelQueryKey(e.id),endpoint:channelEndpoint(e.id),paginate:"simple",queryParams:{returnContentOnly:"true",...s}})}function ChannelSortButton({channel:e}){var x;const s=channelContentConfig.models[e.config.contentModel],t=(s==null?void 0:s.sortMethods.map(l=>({key:l,label:channelContentConfig.sortingMethods[l].label})))||[];e.config.contentType==="manual"&&t.unshift({key:Sort.curated,label:message("Default order")});const[n,i]=useSearchParams(),a=n.get("order")||e.config.contentOrder;if((t==null?void 0:t.length)<2)return null;const o=(x=t==null?void 0:t.find(l=>l.key===a))==null?void 0:x.label;return jsxRuntimeExports.jsxs(MenuTrigger,{selectionMode:"single",showCheckmark:!0,selectedValue:a,onSelectionChange:l=>{l===Sort.recent&&e.config.contentType==="manual"&&(l="channelables.created_at:desc"),i(c=>(c.set("order",l),c),{replace:!0})},children:[jsxRuntimeExports.jsxs("span",{role:"button","aria-label":"Toggle menu",children:[jsxRuntimeExports.jsx(IconButton,{className:"md:hidden",role:"presentation",children:jsxRuntimeExports.jsx(SortIcon,{})}),jsxRuntimeExports.jsx(Button,{startIcon:jsxRuntimeExports.jsx(SortIcon,{}),className:"max-md:hidden",role:"presentation",children:o?jsxRuntimeExports.jsx(Trans,{...o}):jsxRuntimeExports.jsx(Trans,{message:"Popularity"})})]}),jsxRuntimeExports.jsx(Menu,{children:t==null?void 0:t.map(l=>jsxRuntimeExports.jsx(Item,{value:l.key,children:jsxRuntimeExports.jsx(Trans,{...l.label})},l.key))})]})}function SiteSectionHeading({children:e,titleAppend:s,link:t,fontSize:n="text-2xl md:text-3xl",fontWeight:i="font-bold",margin:a="mb-20",className:o,headingType:x="h2",description:l,descriptionFontSize:c="text-base",actions:u,hideBorder:d}){const p=t?jsxRuntimeExports.jsx(Link,{to:t,className:"rounded outline-none transition-colors hover:underline focus-visible:ring-2 focus-visible:ring-offset-2",children:e}):e;return jsxRuntimeExports.jsxs("section",{className:clsx(o,a),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-44 max-md:overflow-x-auto",children:[jsxRuntimeExports.jsx("div",{className:"flex-auto",children:jsxRuntimeExports.jsxs("div",{className:clsx("relative flex items-center gap-4",!d&&"pl-14 before:absolute before:left-0 before:h-5/6 before:w-4 before:rounded before:bg-primary"),children:[jsxRuntimeExports.jsx(x,{className:clsx(n,i),children:p}),s&&jsxRuntimeExports.jsx("span",{className:"pt-4 text-base text-muted",children:s}),t&&jsxRuntimeExports.jsx(IconButton,{elementType:Link,to:t,size:"sm",iconSize:"lg",className:"mt-4 max-md:hidden",children:jsxRuntimeExports.jsx(KeyboardArrowRightIcon,{})})]})}),u&&jsxRuntimeExports.jsx("div",{className:"flex flex-shrink-0 items-center gap-4",children:u})]}),l&&jsxRuntimeExports.jsx("div",{className:clsx("mt-6",c),children:l})]})}function useChannelLayouts(e){const s=channelContentConfig.models[e.config.contentModel],t=s==null?void 0:s.layoutMethods.filter(a=>channelContentConfig.userSelectableLayouts.includes(a)).map(a=>({key:a,label:channelContentConfig.layoutMethods[a].label,icon:channelContentConfig.layoutMethods[a].icon})),[n,i]=useCookie(`channel-layout-${e.config.contentModel}`,e.config.selectedLayout||e.config.layout);return{selectedLayout:n,setSelectedLayout:i,availableLayouts:t}}function ChannelLayoutButton({channel:e}){const{selectedLayout:s,setSelectedLayout:t,availableLayouts:n}=useChannelLayouts(e);if((n==null?void 0:n.length)<2)return null;const i=n==null?void 0:n.find(a=>a.key===s);return jsxRuntimeExports.jsxs(MenuTrigger,{selectionMode:"single",showCheckmark:!0,selectedValue:s,onSelectionChange:a=>t(a),children:[jsxRuntimeExports.jsxs("span",{role:"button","aria-label":"Toggle menu",children:[jsxRuntimeExports.jsx(IconButton,{className:"md:hidden",role:"presentation",children:(i==null?void 0:i.icon)||jsxRuntimeExports.jsx(GridViewIcon,{})}),jsxRuntimeExports.jsx(Button,{role:"presentation",className:"max-md:hidden",startIcon:(i==null?void 0:i.icon)||jsxRuntimeExports.jsx(GridViewIcon,{}),children:i!=null&&i.label?jsxRuntimeExports.jsx(Trans,{...i.label}):jsxRuntimeExports.jsx(Trans,{message:"Popularity"})})]}),jsxRuntimeExports.jsx(Menu,{children:n==null?void 0:n.map(a=>jsxRuntimeExports.jsx(Item,{value:a.key,children:jsxRuntimeExports.jsx(Trans,{...a.label})},a.key))})]})}function UserListByline({user:e}){const{auth:s}=reactExports.useContext(SiteConfigContext);return jsxRuntimeExports.jsxs("div",{className:"flex-shrink-0 flex items-center gap-8 mr-24",children:[jsxRuntimeExports.jsx(UserAvatar,{user:e,circle:!0,size:"sm"}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Trans,{message:"List by <a>:name</a>",values:{a:()=>jsxRuntimeExports.jsx(Link,{to:s.getUserProfileLink(e),className:"font-bold hover:underline",children:e.display_name})}})})]})}function shareLinkSocially(e,s,t,n){const i=generateShareUrl(e,s,t,n);e==="mail"?window.location.href=i:openNewWindow(i)}function openNewWindow(e){const n=(window.innerWidth-575)/2,i=(window.innerHeight-400)/2,a="status=1, scrollbars=1,width=575,height=400,top="+i+",left="+n;window.open(e,"share",a)}function generateShareUrl(e,s,t,n){switch(e){case"facebook":return"https://www.facebook.com/sharer/sharer.php?u="+s;case"twitter":return`https://twitter.com/intent/tweet?text=${t}&url=${s}`;case"pinterest":return"https://pinterest.com/pin/create/button/?url="+s+"&media="+n;case"tumblr":return"https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&posttype=photo&title=&caption="+t+"&content="+n+"&url="+s;case"blogger":return"https://www.blogger.com/blog_this.pyra?t&u="+s+"&n="+t;case"mail":return`mailto:?subject=Check out this link.&body=${s}`}}const CopyLinkIcon=createSvgIcon(jsxRuntimeExports.jsx("path",{d:"M 4 2 C 2.895 2 2 2.895 2 4 L 2 18 L 4 18 L 4 4 L 18 4 L 18 2 L 4 2 z M 8 6 C 6.895 6 6 6.895 6 8 L 6 20 C 6 21.105 6.895 22 8 22 L 20 22 C 21.105 22 22 21.105 22 20 L 22 8 C 22 6.895 21.105 6 20 6 L 8 6 z M 8 8 L 20 8 L 20 20 L 8 20 L 8 8 z M 16 9.0058594 C 15.230215 9.0058594 14.460443 9.2973698 13.878906 9.8789062 L 12.607422 11.150391 L 14.021484 12.564453 L 12.556641 14.029297 L 11.142578 12.615234 L 9.8789062 13.878906 C 8.7158332 15.041979 8.7158332 16.958021 9.8789062 18.121094 C 10.460397 18.702585 11.234094 19 12 19 C 12.765906 19 13.539603 18.702585 14.121094 18.121094 L 15.384766 16.857422 L 13.970703 15.443359 L 15.457031 13.957031 L 14.042969 12.542969 L 15.292969 11.292969 C 15.691896 10.894042 16.308104 10.894042 16.707031 11.292969 C 17.105958 11.691896 17.105958 12.308104 16.707031 12.707031 L 15.464844 13.949219 L 16.878906 15.363281 L 18.121094 14.121094 C 19.284167 12.958021 19.284167 11.041979 18.121094 9.8789062 C 17.539557 9.2973698 16.769785 9.0058594 16 9.0058594 z M 12.542969 14.042969 L 13.957031 15.457031 L 12.707031 16.707031 C 12.506522 16.90754 12.258094 17 12 17 C 11.741906 17 11.493478 16.90754 11.292969 16.707031 C 10.894042 16.308104 10.894042 15.691896 11.292969 15.292969 L 12.542969 14.042969 z"}));function ShareMenuTrigger({link:e,children:s}){const{trans:t}=useTrans(),[,n]=useClipboard(e);return jsxRuntimeExports.jsxs(MenuTrigger,{floatingWidth:"matchTrigger",children:[s,jsxRuntimeExports.jsxs(Menu,{children:[jsxRuntimeExports.jsx(Item,{value:"clipboard",startIcon:jsxRuntimeExports.jsx(CopyLinkIcon,{}),onSelected:()=>{n(),toast.positive(message("Copied link to clipboard"))},children:jsxRuntimeExports.jsx(Trans,{message:"Copy to clipboard"})}),jsxRuntimeExports.jsx(Item,{value:"facebook",startIcon:jsxRuntimeExports.jsx(FacebookIcon,{}),onClick:()=>{shareLinkSocially("facebook",e,t(message("Check out this link")))},children:jsxRuntimeExports.jsx(Trans,{message:"Share to facebook"})}),jsxRuntimeExports.jsx(Item,{value:"twitter",startIcon:jsxRuntimeExports.jsx(TwitterIcon,{}),onClick:()=>{shareLinkSocially("twitter",e,t(message("Check out this link")))},children:jsxRuntimeExports.jsx(Trans,{message:"Share to twitter"})})]})]})}function UserListLink({list:e,children:s,...t}){const n=reactExports.useMemo(()=>getUserListLink(e),[e]);let i;if(s)i=s;else{if(e.internal&&e.name==="watchlist")return jsxRuntimeExports.jsx(Trans,{message:"Watchlist"});i=e.name}return jsxRuntimeExports.jsx(BaseMediaLink,{...t,link:n,children:i})}function getUserListLink(e,{absolute:s}={}){return getBaseMediaLink(`/lists/${e.id}`,{absolute:s})}function UserListDetails({list:e,className:s,showShareButton:t,showVisibility:n=!0}){return jsxRuntimeExports.jsxs("div",{className:clsx("flex items-center flex-shrink-0 whitespace-nowrap text-muted gap-4",s),children:[t&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ShareButton$4,{list:e}),jsxRuntimeExports.jsx(Divider,{marginLeft:"ml-2"})]}),e.items_count?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Trans,{message:":count items",values:{count:e.items_count}}),jsxRuntimeExports.jsx(Divider,{})]}):null,jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(Trans,{message:"Updated :date",values:{date:jsxRuntimeExports.jsx(FormattedRelativeTime,{date:e.updated_at})}})}),n&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Divider,{}),e.public?jsxRuntimeExports.jsx(LockOpenIcon,{size:"sm"}):jsxRuntimeExports.jsx(LockIcon,{size:"sm"}),jsxRuntimeExports.jsx("div",{children:e.public?jsxRuntimeExports.jsx(Trans,{message:"Public"}):jsxRuntimeExports.jsx(Trans,{message:"Private"})})]})]})}function ShareButton$4({list:e}){const s=getUserListLink(e,{absolute:!0});return jsxRuntimeExports.jsx(ShareMenuTrigger,{link:s,children:jsxRuntimeExports.jsx(Button,{startIcon:jsxRuntimeExports.jsx(ShareIcon,{}),sizeClassName:"px-10 py-6",children:jsxRuntimeExports.jsx(Trans,{message:"Share"})})})}function Divider({marginLeft:e="ml-12"}){return jsxRuntimeExports.jsx("div",{className:clsx("h-20 w-1 bg-divider mr-10",e)})}const FilterModelTypes=[TITLE_MODEL,MOVIE_MODEL,SERIES_MODEL];function ChannelHeader({channel:e,isNested:s,actions:t,margin:n=s?"mb-16 md:mb-30":"mb-20 md:mb-40"}){const i=!s&&FilterModelTypes.includes(e.config.contentModel)&&e.config.contentType==="listAll",{encodedFilters:a}=useBackendFilterUrlParams(),{filters:o,filtersLoading:x}=useTitleIndexFilters({disabled:!i});return e.config.hideTitle?null:jsxRuntimeExports.jsxs("section",{className:clsx(n),children:[jsxRuntimeExports.jsx(ChannelTitle,{channel:e,isNested:s,actions:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[t,!s&&jsxRuntimeExports.jsx(ChannelSortButton,{channel:e}),i&&jsxRuntimeExports.jsx(AddFilterButton,{icon:jsxRuntimeExports.jsx(TuneIcon,{}),color:null,variant:"text",disabled:x,filters:o}),!s&&jsxRuntimeExports.jsx(ChannelLayoutButton,{channel:e})]})}),i&&jsxRuntimeExports.jsx("div",{className:"mt-14",children:jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:x&&a?jsxRuntimeExports.jsx(FilterListSkeleton,{}):jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:jsxRuntimeExports.jsx(FilterList,{filters:o})},"filter-list")})})]})}function ChannelTitle({channel:e,isNested:s,actions:t}){const{restriction:n}=useParams();if(e.config.hideTitle)return null;const i=e.config.restriction&&n?`/channel/${e.slug}/${n}`:`/channel/${e.slug}`;return jsxRuntimeExports.jsx(SiteSectionHeading,{className:"flex-auto",margin:"m-0",description:jsxRuntimeExports.jsx(ChannelDescription,{channel:e}),actions:t,headingType:s?"h2":"h1",descriptionFontSize:s?"text-sm":void 0,fontWeight:s?"font-normal":void 0,link:s?i:void 0,children:jsxRuntimeExports.jsx(Trans,{message:e.name})})}function ChannelDescription({channel:e}){return e.type==="channel"?jsxRuntimeExports.jsx(reactExports.Fragment,{children:e.description}):jsxRuntimeExports.jsxs("div",{className:"mt-18 items-center text-sm md:flex",children:[e.user&&jsxRuntimeExports.jsx(UserListByline,{user:e.user}),jsxRuntimeExports.jsx(UserListDetails,{list:e,className:"ml-auto max-md:mt-14",showShareButton:!0})]})}function ContentGridLayout({children:e,className:s,variant:t,gridCols:n="grid-cols-[repeat(var(--nVisibleItems),minmax(0,1fr))]"}){return jsxRuntimeExports.jsx("div",{className:clsx("grid gap-24",n,s,t==="landscape"?"content-grid-landscape":"content-grid-portrait"),children:e})}const PersonAge=reactExports.memo(({person:e,showRange:s})=>s&&e.birth_date&&e.death_date?jsxRuntimeExports.jsx(FormattedDateTimeRange,{start:e.birth_date,end:e.death_date,options:{year:"numeric"}}):e.birth_date?jsxRuntimeExports.jsx(reactExports.Fragment,{children:calculateAgeFromBirthDate(e.birth_date,e.death_date)}):null);function calculateAgeFromBirthDate(e,s){const t=s?new Date(s):new Date,n=new Date(e);let i=t.getFullYear()-n.getFullYear();const a=t.getMonth()-n.getMonth();return(a<0||a===0&&t.getDate()<n.getDate())&&i--,i}function NewsArticleGridItem({article:e}){return jsxRuntimeExports.jsxs("div",{className:"items-start gap-14 lg:flex",children:[jsxRuntimeExports.jsx(NewsArticleImage,{article:e,className:"aspect-poster max-w-90 max-md:hidden"}),jsxRuntimeExports.jsxs("div",{className:"min-w-0 overflow-hidden overflow-ellipsis text-base md:mt-24 lg:mt-6",children:[jsxRuntimeExports.jsx(NewsArticleLink,{article:e,className:"font-medium"}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"mt-10 min-w-0 overflow-hidden overflow-ellipsis text-xs",children:[jsxRuntimeExports.jsx(FormattedDate,{date:e.created_at}),jsxRuntimeExports.jsx("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap",children:e.source})]})]})]})}function TitlePortraitGridItem({item:e,rating:s,description:t}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx(TitlePoster,{title:e,srcSize:"md",showPlayButton:!0})}),jsxRuntimeExports.jsxs("div",{className:"mt-10 text-sm",children:[jsxRuntimeExports.jsx(RatingOrReleaseDate,{title:e,rating:s,className:"mb-4"}),jsxRuntimeExports.jsx(TitleLink,{title:e,className:"block text-base font-medium"}),t?jsxRuntimeExports.jsx("div",{className:"mt-4",children:t}):null]})]})}function TitleLandscapeGridItem({item:e}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitleBackdrop,{title:e,srcSize:"lg",size:"w-full",className:"rounded",wrapWithLink:!0,showPlayButton:!0}),jsxRuntimeExports.jsxs("div",{className:"mt-10 text-sm",children:[jsxRuntimeExports.jsx(TitleLink,{title:e,className:"mb-4 block text-base font-semibold"}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"mb-4",children:[e.release_date&&jsxRuntimeExports.jsx(FormattedDate,{date:e.release_date}),e.certification&&jsxRuntimeExports.jsx("div",{className:"uppercase",children:e.certification})]}),jsxRuntimeExports.jsx(TitleRating,{score:e.rating,className:"mb-4"})]})]})}function RatingOrReleaseDate({title:e,rating:s,className:t}){return s||(s=e.rating),s?jsxRuntimeExports.jsx(TitleRating,{score:s,className:t}):e.release_date?jsxRuntimeExports.jsx("div",{className:t,children:jsxRuntimeExports.jsx(FormattedDate,{date:e.release_date})}):null}function ChannelContentGridItem({item:e,variant:s}){switch(e.model_type){case TITLE_MODEL:return s==="landscape"?jsxRuntimeExports.jsx(TitleLandscapeGridItem,{item:e}):jsxRuntimeExports.jsx(TitlePortraitGridItem,{item:e});case PERSON_MODEL:return jsxRuntimeExports.jsx(PersonGridItem,{item:e});case NEWS_ARTICLE_MODEL:return jsxRuntimeExports.jsx(NewsArticleGridItem,{article:e});default:return null}}function PersonGridItem({item:e}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(PersonPoster,{person:e,srcSize:"md",size:"w-full",rounded:!0}),jsxRuntimeExports.jsxs("div",{className:"mt-10 text-center text-sm",children:[jsxRuntimeExports.jsx(PersonLink,{person:e,className:"block text-base font-medium"}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(PersonAge,{person:e,showRange:!0})})]})]})}function useChannelContent(e){const s=useChannelQueryParams(e),t=channelQueryKey(e.id,s),n=reactExports.useRef(hashKey(t)).current;return useQuery({queryKey:channelQueryKey(e.id,s),queryFn:()=>fetchChannelContent(e.id,s),placeholderData:keepPreviousData,initialData:()=>{var i;if(hashKey(t)===n)return(i=e.content)==null?void 0:i.data}})}function fetchChannelContent(e,s){return apiClient.get(channelEndpoint(e),{params:{...s,paginate:"simple",returnContentOnly:"true"}}).then(t=>t.data.pagination.data)}function ChannelContentGrid(e){return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ChannelHeader,{...e}),e.isNested?jsxRuntimeExports.jsx(SimpleGrid,{...e}):jsxRuntimeExports.jsx(PaginatedGrid,{...e})]})}function PaginatedGrid({channel:e,variant:s}){const t=usePaginatedChannelContent(e);return jsxRuntimeExports.jsxs("div",{className:clsx("transition-opacity",t.isReloading&&"opacity-70"),children:[jsxRuntimeExports.jsx(ContentGrid,{content:t.items,variant:s}),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:t})]})}function SimpleGrid({channel:e,variant:s}){const{data:t}=useChannelContent(e);return jsxRuntimeExports.jsx(ContentGrid,{content:t,variant:s})}function ContentGrid({content:e=[],variant:s}){return jsxRuntimeExports.jsx(ContentGridLayout,{variant:s,children:e.map(t=>jsxRuntimeExports.jsx(ChannelContentGridItem,{item:t,variant:s},`${t.id}-${t.model_type}`))})}var functionDebounce=debounce;function debounce(e,s,t){var n=null,i=null,a=function(){n&&(clearTimeout(n),i=null,n=null)},o=function(){var l=i;a(),l&&l()},x=function(){if(!s)return e.apply(this,arguments);var l=this,c=arguments,u=t&&!n;if(a(),i=function(){e.apply(l,c)},n=setTimeout(function(){if(n=null,!u){var d=i;return i=null,d()}},s),u)return i()};return x.cancel=a,x.flush=o,x}const containerClassName="content-carousel content-grid relative w-full grid grid-flow-col grid-rows-[auto] overflow-x-auto overflow-y-hidden gap-24 snap-always snap-x snap-mandatory hidden-scrollbar scroll-smooth",itemClassName="snap-start snap-normal";function useCarousel({rotate:e=!1}={}){const s=reactExports.useRef(null),t=reactExports.useRef(0),n=reactExports.useRef(5),[i,a]=reactExports.useState(e),[o,x]=reactExports.useState(!0),[l,c]=reactExports.useState(0),u=reactExports.useCallback(()=>{const j=s.current;if(j&&t.current){e||(x(j.scrollWidth-1>j.scrollLeft+j.clientWidth),a(j.scrollLeft>0));const E=j.clientWidth,R=Math.round(j.scrollLeft/E);c(R)}},[e]);reactExports.useEffect(()=>{const j=s.current,E=functionDebounce(()=>u(),100);return j&&j.addEventListener("scroll",E),()=>j==null?void 0:j.removeEventListener("scroll",E)},[u]),$f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{const j=s.current;if(j){n.current=Number(getComputedStyle(j).getPropertyValue("--nVisibleItems"));const E=j.children.item(0),R=new ResizeObserver(g=>{t.current=g[0].contentRect.width,u()});return E&&R.observe(E),()=>R.unobserve(j)}},[u]);const d=reactExports.useCallback(j=>{if(s.current){c(j);const E=t.current*j;s.current.scrollTo({left:E})}},[]),p=reactExports.useCallback(()=>{if(s.current){const j=s.current.clientWidth,E=s.current.scrollLeft,R=!E&&e?s.current.scrollWidth-j:E-j;s.current.scrollTo({left:R})}},[e]),h=reactExports.useCallback(()=>{if(s.current){const j=s.current.clientWidth,E=s.current.scrollLeft,R=e&&E+j>=s.current.scrollWidth?0:(l+1)*j;s.current.scrollTo({left:R})}},[l,e]);return{scrollContainerRef:s,scrollToIndex:d,scrollToPreviousPage:p,scrollToNextPage:h,canScrollForward:o,canScrollBackward:i,activePage:l,containerClassName,itemClassName}}function ChannelContentCarousel(e){var d;const{channel:s,variant:t}=e,{scrollContainerRef:n,canScrollForward:i,canScrollBackward:a,scrollToPreviousPage:o,scrollToNextPage:x,containerClassName:l,itemClassName:c}=useCarousel(),u=t==="landscape"?"content-grid-landscape":"content-grid-portrait";return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ChannelHeader,{...e,actions:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(IconButton,{disabled:!a,onClick:()=>o(),"aria-label":"Previous page",children:jsxRuntimeExports.jsx(KeyboardArrowLeftIcon,{})}),jsxRuntimeExports.jsx(IconButton,{disabled:!i,onClick:()=>x(),"aria-label":"Next page",children:jsxRuntimeExports.jsx(KeyboardArrowRightIcon,{})})]})}),jsxRuntimeExports.jsx("div",{ref:n,className:clsx(l,u),children:(d=s.content)==null?void 0:d.data.map(p=>jsxRuntimeExports.jsx("div",{className:c,children:jsxRuntimeExports.jsx(ChannelContentGridItem,{item:p,variant:t})},`${p.id}-${p.model_type}`))})]})}function ChannelContentSlider({channel:e,isNested:s}){const{scrollContainerRef:t,activePage:n,canScrollBackward:i,canScrollForward:a,scrollToNextPage:o,scrollToPreviousPage:x}=useCarousel({rotate:!0}),{data:l}=useChannelContent(e),c=l||[];return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ChannelHeader,{channel:e,isNested:s,margin:"mb-18"}),jsxRuntimeExports.jsxs("div",{className:"gap-24 md:flex",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex-auto",children:[jsxRuntimeExports.jsx("div",{ref:t,className:"hidden-scrollbar flex h-full select-none snap-x snap-mandatory snap-always items-center overflow-x-auto",children:c.map((u,d)=>jsxRuntimeExports.jsx(Slide,{item:u,index:d},u.id))}),jsxRuntimeExports.jsxs("div",{className:"absolute top-10 z-20 w-full md:top-[170px]",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-8 hidden md:left-14 md:block",children:jsxRuntimeExports.jsx(IconButton,{variant:"outline",radius:"rounded",size:"lg",color:"white",disabled:!i,onClick:()=>x(),children:jsxRuntimeExports.jsx(ChevronLeftIcon,{})})}),jsxRuntimeExports.jsx("div",{className:"absolute right-8 hidden md:right-14 md:block",children:jsxRuntimeExports.jsx(IconButton,{variant:"outline",radius:"rounded",size:"lg",color:"white",disabled:!a,onClick:()=>o(),children:jsxRuntimeExports.jsx(ChevronRightIcon,{})})})]})]}),jsxRuntimeExports.jsx(UpNext,{titles:c,activePage:n})]})]})}function Slide({item:e,index:s}){return jsxRuntimeExports.jsxs("div",{className:"relative h-full w-full flex-shrink-0 snap-start snap-normal overflow-hidden rounded",children:[jsxRuntimeExports.jsx(TitleBackdrop,{title:e,lazy:s>0,className:"min-h-240 md:min-h-0",wrapperClassName:"h-full"}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 isolate flex h-full w-full items-center justify-start gap-24 rounded p-30 text-white md:items-end",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-0 h-full w-full bg-gradient-to-b from-black/40 max-md:top-0 md:bottom-0 md:h-3/4 md:bg-gradient-to-t md:from-black/100"}),jsxRuntimeExports.jsx(TitlePoster,{title:e,size:"max-h-320",srcSize:"md",className:"z-10 shadow-md max-md:hidden"}),jsxRuntimeExports.jsxs("div",{className:"z-10 text-lg md:max-w-620",children:[jsxRuntimeExports.jsx(TitleRating,{score:e.rating}),jsxRuntimeExports.jsx("div",{className:"my-8 text-2xl md:text-5xl",children:jsxRuntimeExports.jsx(TitleLink,{title:e})}),e.description&&jsxRuntimeExports.jsx("p",{className:"max-md:hidden",children:e.description}),e.primary_video&&jsxRuntimeExports.jsx(Button,{variant:"flat",color:"primary",startIcon:jsxRuntimeExports.jsx(MediaPlayIcon,{}),radius:"rounded-full",className:"mt-24 md:min-h-42 md:min-w-144",elementType:Link,to:getWatchLink(e.primary_video),children:e.primary_video.category==="full"?jsxRuntimeExports.jsx(Trans,{message:"Watch now"}):jsxRuntimeExports.jsx(Trans,{message:"Play trailer"})})]})]})]})}function UpNext({titles:e,activePage:s}){const t=e.length,n=s+1,i=n+3,a=e.slice(n,i);return i>t&&a.push(...e.slice(0,i-t)),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:jsxRuntimeExports.jsxs("div",{className:"w-1/4 max-w-200 flex-shrink-0 max-md:hidden",children:[jsxRuntimeExports.jsx("div",{className:"mb-12 text-lg font-semibold",children:jsxRuntimeExports.jsx(Trans,{message:"Up next"})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-24",children:a.map(o=>jsxRuntimeExports.jsxs(m.div,{className:"relative flex-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[jsxRuntimeExports.jsx(TitleBackdrop,{title:o,className:"mb-6 rounded",size:"w-full",srcSize:"md",wrapWithLink:!0,showPlayButton:!0}),jsxRuntimeExports.jsx("div",{className:"mb-2 overflow-hidden overflow-ellipsis whitespace-nowrap text-sm",children:jsxRuntimeExports.jsx(TitleLink,{title:o,className:"text-base font-medium"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(TitleRating,{score:o.rating,className:"text-sm"})})]},o.id))})]})})}function NewsArticleSourceLink({article:e,className:s}){return jsxRuntimeExports.jsxs("div",{className:clsx("flex items-center gap-4 text-primary",s),children:[jsxRuntimeExports.jsx(OpenInNewIcon,{size:"xs",className:"flex-shrink-0"}),jsxRuntimeExports.jsx("a",{href:e.source_url,target:"_blank",rel:"noreferrer",className:clsx(LinkStyle,"whitespace-nowrap overflow-hidden overflow-ellipsis"),children:e.source})]})}function NewsArticleByline({article:e}){return e.byline?jsxRuntimeExports.jsx("span",{className:"whitespace-nowrap",children:jsxRuntimeExports.jsx(Trans,{message:"By :name",values:{name:e.byline}})}):null}function ChannelContentNews({channel:e,isNested:s}){const{data:t}=useChannelContent(e);return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ChannelHeader,{channel:e,isNested:s}),jsxRuntimeExports.jsxs("div",{className:"flex gap-34",children:[jsxRuntimeExports.jsx("div",{className:"w-240 flex-shrink-0",children:t==null?void 0:t.slice(0,3).map(n=>jsxRuntimeExports.jsx(LeftColArticle,{article:n,className:"mb-14"},n.id))}),jsxRuntimeExports.jsx("div",{className:"flex-auto",children:t==null?void 0:t.slice(3,12).map(n=>jsxRuntimeExports.jsxs("div",{className:"mb-12 flex items-center gap-14",children:[jsxRuntimeExports.jsx(NewsArticleImage,{article:n,size:"w-84 h-84"}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx(NewsArticleLink,{article:n,className:"font-semibold"}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"text-sm",children:[jsxRuntimeExports.jsx(FormattedDate,{date:n.created_at}),jsxRuntimeExports.jsx(NewsArticleByline,{article:n}),jsxRuntimeExports.jsx(NewsArticleSourceLink,{article:n})]})]})]},n.id))})]})]})}function LeftColArticle({article:e,className:s}){return jsxRuntimeExports.jsxs("div",{className:s,children:[jsxRuntimeExports.jsx(NewsArticleImage,{article:e,size:"aspect-video w-full"}),jsxRuntimeExports.jsx(NewsArticleLink,{article:e,className:"mt-10 block text-sm font-semibold"}),jsxRuntimeExports.jsxs("div",{className:"mt-8 text-xs text-muted",children:[jsxRuntimeExports.jsx(NewsArticleByline,{article:e}),jsxRuntimeExports.jsx(NewsArticleSourceLink,{article:e,className:"mt-4"})]})]})}function ChannelContentListItem({item:e}){switch(e.model_type){case TITLE_MODEL:return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-24 mb-24",children:[jsxRuntimeExports.jsx(TitlePoster,{title:e,srcSize:"md",size:"w-128",showPlayButton:!0}),jsxRuntimeExports.jsxs("div",{className:"flex-auto min-w-0 pt-12",children:[jsxRuntimeExports.jsx(TitleLink,{title:e,className:"font-medium"}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"text-sm mt-4",children:[e.runtime?jsxRuntimeExports.jsx(FormattedDuration,{minutes:e.runtime,verbose:!0}):null,e.certification&&jsxRuntimeExports.jsx("span",{className:"uppercase",children:e.certification})]}),e.rating&&e.status!=="upcoming"?jsxRuntimeExports.jsx(InteractableRating,{size:"md",title:e,className:"my-12"}):jsxRuntimeExports.jsx("div",{className:"my-12",children:jsxRuntimeExports.jsx(FormattedDate,{date:e.release_date})}),e.description?jsxRuntimeExports.jsx("p",{className:"text-sm",children:e.description}):null]})]});case PERSON_MODEL:return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-24 mb-24",children:[jsxRuntimeExports.jsx(PersonPoster,{person:e,srcSize:"md",size:"w-128"}),jsxRuntimeExports.jsxs("div",{className:"flex-auto min-w-0 pt-12",children:[jsxRuntimeExports.jsx(PersonLink,{person:e,className:"block font-medium text-lg"}),e.primary_credit?jsxRuntimeExports.jsx("div",{className:"text-sm mt-4",children:jsxRuntimeExports.jsx(KnownForCompact,{person:e})}):null,jsxRuntimeExports.jsx("p",{className:"text-sm mt-12",children:e.description})]})]});case NEWS_ARTICLE_MODEL:return jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-14 mb-44",children:[jsxRuntimeExports.jsx(NewsArticleImage,{article:e,className:"aspect-poster max-w-90"}),jsxRuntimeExports.jsxs("div",{className:"mt-6 text-base",children:[jsxRuntimeExports.jsx(NewsArticleLink,{article:e,className:"font-medium"}),jsxRuntimeExports.jsx("p",{className:"text-sm mt-10",children:e.body}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"text-xs mt-10",children:[jsxRuntimeExports.jsx(FormattedDate,{date:e.created_at}),jsxRuntimeExports.jsx(NewsArticleSourceLink,{article:e})]})]})]});default:return null}}function ChannelContentList(e){return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ChannelHeader,{...e}),e.isNested||e.channel.config.contentType!=="listAll"?jsxRuntimeExports.jsx(SimpleList,{...e}):jsxRuntimeExports.jsx(PaginatedList,{...e})]})}function SimpleList({channel:e}){const{data:s}=useChannelContent(e);return jsxRuntimeExports.jsx(Content$1,{content:s})}function PaginatedList({channel:e}){const s=usePaginatedChannelContent(e);return jsxRuntimeExports.jsx(Content$1,{content:s.items,className:clsx("transition-opacity",s.isReloading&&"opacity-70"),children:jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:s})})}function Content$1({content:e=[],children:s,className:t}){return jsxRuntimeExports.jsxs("div",{className:t,children:[e.map(n=>jsxRuntimeExports.jsx(ChannelContentListItem,{item:n},`${n.id}-${n.model_type}`)),s]})}function ChannelContent(e){var s;return e.isNested&&!((s=e.channel.content)!=null&&s.data.length)?null:e.channel.config.contentModel===CHANNEL_MODEL?jsxRuntimeExports.jsx(NestedChannels,{...e}):jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ChannelLayout,{...e}),jsxRuntimeExports.jsx(NoResultsMessage,{channel:e.channel})]})}function NoResultsMessage({channel:e}){var s;return((s=e.content)==null?void 0:s.data.length)===0?jsxRuntimeExports.jsx(IllustratedMessage,{className:"mt-60",image:jsxRuntimeExports.jsx(SvgImage,{src:todoImage}),title:e.type==="list"?jsxRuntimeExports.jsx(Trans,{message:"This list does not have any content yet."}):jsxRuntimeExports.jsx(Trans,{message:"This channel does not have any content yet."})}):null}function ChannelLayout(e){const{channel:s,isNested:t}=e,{selectedLayout:n}=useChannelLayouts(s);switch(t?s.config.nestedLayout:n){case"grid":return jsxRuntimeExports.jsx(ChannelContentGrid,{...e,variant:"portrait"});case"landscapeGrid":return jsxRuntimeExports.jsx(ChannelContentGrid,{...e,variant:"landscape"});case"list":return jsxRuntimeExports.jsx(ChannelContentList,{...e});case"carousel":return jsxRuntimeExports.jsx(ChannelContentCarousel,{...e,variant:"portrait"});case"landscapeCarousel":return jsxRuntimeExports.jsx(ChannelContentCarousel,{...e,variant:"landscape"});case"slider":return jsxRuntimeExports.jsx(ChannelContentSlider,{...e});case"news":return jsxRuntimeExports.jsx(ChannelContentNews,{...e});default:return null}}function NestedChannels({channel:e,isNested:s}){var t;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ChannelHeader,{channel:e,isNested:s}),(t=e.content)==null?void 0:t.data.map(n=>jsxRuntimeExports.jsx("div",{className:"mb-40 md:mb-50",children:jsxRuntimeExports.jsx(ChannelContent,{channel:n,isNested:!0})},n.id))]})}function useSearchResults(e,s=""){return s=s.trim(),s==="."&&(s=""),useQuery({queryKey:["search",s,"loader"],queryFn:({signal:t})=>search(e,s,t),enabled:!!s,placeholderData:s?keepPreviousData:void 0,initialData:()=>{var n;const t=(n=getBootstrapData().loaders)==null?void 0:n[e];if(s&&(t==null?void 0:t.query)==s)return t}})}async function search(e,s,t){return await new Promise(n=>setTimeout(n,300)),apiClient.get(`search/${encodeURIComponent(s)}`,{params:{loader:e},signal:t}).then(n=>n.data)}function SearchAutocomplete({className:e}){const{searchQuery:s}=useParams(),{trans:t}=useTrans(),n=useNavigate(),[i,a]=reactExports.useState(s||""),[o,x]=reactExports.useState(!1),{isFetching:l,data:c}=useSearchResults("searchAutocomplete",i);return jsxRuntimeExports.jsx("form",{onSubmit:u=>{u.preventDefault(),i.trim().length&&(x(!1),n(`/search/${encodeURIComponent(i.trim())}`))},className:clsx("flex max-w-580 flex-auto items-center rounded bg-chip/40 text",e),children:jsxRuntimeExports.jsx(ComboBoxForwardRef,{size:"sm",startAdornment:jsxRuntimeExports.jsx("button",{type:"submit","aria-label":t(message("Search")),children:jsxRuntimeExports.jsx(SearchIcon,{className:"flex-shrink-0 text-muted"})}),className:"w-full",offset:6,inputClassName:"w-full outline-none text-sm placeholder:text-muted",isAsync:!0,hideEndAdornment:!0,placeholder:t(message("Search for movies, tv shows and people...")),isLoading:l,inputValue:i,onInputValueChange:a,clearInputOnItemSelection:!0,blurReferenceOnItemSelection:!0,selectionMode:"none",openMenuOnFocus:!0,floatingMaxHeight:670,isOpen:o,onOpenChange:x,children:c==null?void 0:c.results.map(u=>{switch(u.model_type){case TITLE_MODEL:return jsxRuntimeExports.jsx(Item,{value:u.id,onSelected:()=>{n(getTitleLink(u))},startIcon:jsxRuntimeExports.jsx(TitlePoster,{title:u,srcSize:"sm",size:"w-46"}),description:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"mb-4",children:u.year}),jsxRuntimeExports.jsx("div",{children:u.is_series?jsxRuntimeExports.jsx(Trans,{message:"Tv series"}):jsxRuntimeExports.jsx(Trans,{message:"Movie"})})]}),textLabel:u.name,children:u.name},u.id);case PERSON_MODEL:return jsxRuntimeExports.jsx(Item,{value:u.id,onSelected:()=>{n(getPersonLink(u))},startIcon:jsxRuntimeExports.jsx(PersonPoster,{person:u,srcSize:"sm",className:"w-56"}),description:jsxRuntimeExports.jsx(KnownForCompact,{person:u}),textLabel:u.name,children:u.name},u.id)}})})})}function MainNavbar({position:e="relative"}){return jsxRuntimeExports.jsxs(Navbar,{size:"md",menuPosition:"primary",className:clsx(e,"z-40 w-full flex-shrink-0"),border:"border-none",alwaysDarkMode:!0,children:[jsxRuntimeExports.jsx(Tooltip,{label:jsxRuntimeExports.jsx(Trans,{message:"Search"}),children:jsxRuntimeExports.jsx(IconButton,{elementType:Link,to:"/search",className:"md:hidden",children:jsxRuntimeExports.jsx(SearchIcon,{})})}),jsxRuntimeExports.jsx(SearchAutocomplete,{className:"max-md:hidden"})]})}function AdHost({slot:e,className:s}){var a;const t=useSettings(),{isSubscribed:n}=useAuth(),i=reactExports.useMemo(()=>dot.pick(`ads.${e}`,t),[e,t]);return(a=t.ads)!=null&&a.disable||n||!i?null:jsxRuntimeExports.jsx(InvariantAd,{className:s,slot:e,adCode:i})}const InvariantAd=reactExports.memo(({slot:e,adCode:s,className:t})=>{const n=reactExports.useRef(null),i=reactExports.useId();return reactExports.useEffect(()=>(n.current&&loadAdScripts(s,n.current).then(()=>{executeAdJavascript(s,i)}),()=>{delete window.google_ad_modifications}),[s,i]),jsxRuntimeExports.jsx("div",{ref:n,id:i,className:clsx("ad-host flex items-center justify-center w-full max-w-full overflow-hidden min-h-90 max-h-[600px]",`${e.replace(/\./g,"-")}-host`,t),dangerouslySetInnerHTML:{__html:getAdHtml(s)}})},()=>!1);function getAdHtml(e){return e==null?void 0:e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").trim()}function loadAdScripts(e,s){const t=[],n=/<script.*?src=['"](.*?)['"]/g;let i;for(;i=n.exec(e);)i[1]&&t.push(lazyLoader.loadAsset(i[1],{type:"js",parentEl:s}));return Promise.all(t)}function executeAdJavascript(adCode,id){const pattern=/<script\b[^>]*>([\s\S]*?)<\/script>/g;let content;for(;content=pattern.exec(adCode);)if(content[1]){const r=`var d = document.createElement('div'); d.innerHTML = $1; document.getElementById('${id}').appendChild(d.firstChild);`,toEval=content[1].replace(/document.write\((.+?)\);/,r);eval(toEval)}}function SitePageLayout({children:e}){return useScrollToTop(),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx(MainNavbar,{}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx(AdHost,{slot:"general_top",className:"py-24"}),jsxRuntimeExports.jsx("div",{className:"relative min-h-[1000px] overflow-hidden",children:e}),jsxRuntimeExports.jsx(AdHost,{slot:"general_bottom",className:"py-24"})]}),jsxRuntimeExports.jsx(Footer,{className:"container mx-auto mt-48 flex-shrink-0 px-24"})]})}function ChannelPage({slugOrId:e,type:s="channel"}){const t=useChannel(e,"channelPage",{channelType:s});let n=null;return t.data?n=jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:t}),jsxRuntimeExports.jsx("div",{className:"pb-24",children:jsxRuntimeExports.jsx("div",{className:"container mx-auto p-14 @container md:p-24",children:jsxRuntimeExports.jsx(ChannelContent,{channel:t.data.channel,isNested:!1},t.data.channel.id)})})]}):n=jsxRuntimeExports.jsx(PageStatus,{query:t,loaderClassName:"absolute inset-0 m-auto",loaderIsScreen:!1}),jsxRuntimeExports.jsx(SitePageLayout,{children:n})}function TitlePageImageGrid({images:e,count:s,heading:t,srcSize:n}){const i=useIsMobileMediaQuery(),{trans:a}=useTrans();return e!=null&&e.length?(s||(s=i?6:5),jsxRuntimeExports.jsxs("div",{className:"mt-48",children:[t,jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-12 md:grid-cols-5 md:gap-24",children:e.slice(0,s).map((o,x)=>jsxRuntimeExports.jsxs(DialogTrigger,{type:"modal",children:[jsxRuntimeExports.jsx(ButtonBase,{"aria-label":a(message("Image :index",{values:{index:x}})),children:jsxRuntimeExports.jsx(ImageItem,{image:o,srcSize:n})}),jsxRuntimeExports.jsx(ImageZoomDialog,{images:e.map(l=>l.url),defaultActiveIndex:x})]},o.id))})]})):null}function ImageItem({image:e,srcSize:s="md"}){const t=useImageSrc(e.url,{size:s});return jsxRuntimeExports.jsx("img",{className:"aspect-square w-full cursor-pointer rounded object-cover",src:t,alt:""})}function TitleCreditsGrid({credits:e,className:s}){return e.length?jsxRuntimeExports.jsx("div",{className:clsx("grid gap-14 md:gap-20 title-credits-grid",s),children:e.map(t=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-14 md:gap-20",children:[jsxRuntimeExports.jsx(PersonPoster,{rounded:!0,person:t,size:"w-70 md:w-96",srcSize:"md"}),jsxRuntimeExports.jsxs("div",{className:"max-md:text-sm",children:[jsxRuntimeExports.jsx(PersonLink,{className:"block font-bold",person:t}),jsxRuntimeExports.jsx("div",{className:"text-muted",children:jsxRuntimeExports.jsx(Description,{credit:t})})]})]},t.pivot.id))}):jsxRuntimeExports.jsx("div",{className:"text-muted italic",children:jsxRuntimeExports.jsx(Trans,{message:"We've no cast information for this title yet."})})}function Description({credit:e}){return e.pivot.department==="actors"?jsxRuntimeExports.jsx(reactExports.Fragment,{children:e.pivot.character}):jsxRuntimeExports.jsx("span",{className:"capitalize",children:jsxRuntimeExports.jsx(Trans,{message:e.pivot.job})})}function TitlePageCast({credits:e=[]}){const s=e.filter(t=>t.pivot.department==="actors");return jsxRuntimeExports.jsxs("div",{className:"mt-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{children:jsxRuntimeExports.jsx(Trans,{message:"Cast"})}),jsxRuntimeExports.jsx(TitleCreditsGrid,{credits:s}),jsxRuntimeExports.jsx(Button,{className:"mt-24",variant:"outline",color:"primary",elementType:Link,to:"full-credits",endIcon:jsxRuntimeExports.jsx(ArrowForwardIcon,{}),children:jsxRuntimeExports.jsx(Trans,{message:"All cast and crew"})})]})}function useRelatedTitles(e){return useQuery({queryKey:["titles",e,"related"],queryFn:()=>fetchRelatedTitles(e)})}function fetchRelatedTitles(e){return apiClient.get(`titles/${e}/related`).then(s=>s.data)}function RelatedTitlesPanel({title:e}){const{data:s}=useRelatedTitles(e.id);return!s||s.titles.length===0?null:jsxRuntimeExports.jsx(RelatedTitlesCarousel,{titles:s.titles})}function RelatedTitlesCarousel({titles:e}){const{scrollContainerRef:s,canScrollForward:t,canScrollBackward:n,scrollToPreviousPage:i,scrollToNextPage:a,containerClassName:o,itemClassName:x}=useCarousel();return jsxRuntimeExports.jsxs("div",{className:"mt-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{actions:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(IconButton,{disabled:!n,onClick:()=>i(),"aria-label":"Scroll left",children:jsxRuntimeExports.jsx(KeyboardArrowLeftIcon,{})}),jsxRuntimeExports.jsx(IconButton,{disabled:!t,onClick:()=>a(),"aria-label":"Scroll right",children:jsxRuntimeExports.jsx(KeyboardArrowRightIcon,{})})]}),children:jsxRuntimeExports.jsx(Trans,{message:"More like this"})}),jsxRuntimeExports.jsx("div",{ref:s,className:clsx(o,"content-grid-portrait"),children:e.map(l=>jsxRuntimeExports.jsx("div",{className:x,children:jsxRuntimeExports.jsx(TitlePortraitGridItem,{item:l})},l.id))})]})}function TitlePageSeasonGrid({data:{title:e,seasons:s}}){const t=useTitleSeasons(e.id,s);return jsxRuntimeExports.jsxs("div",{className:"mt-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{titleAppend:s!=null&&s.total?`(${s.total})`:void 0,children:jsxRuntimeExports.jsx(Trans,{message:"Seasons"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-4 gap-14 sm:grid-cols-6 lg:grid-cols-8",children:t.items.map(n=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(SeasonPoster,{title:e,season:n,srcSize:"sm",className:"aspect-poster flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx(SeasonLink,{className:"text-sm",title:e,seasonNumber:n.number,color:"primary"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-muted",children:jsxRuntimeExports.jsx(FormattedDate,{date:n.release_date,options:{year:"numeric"}})})]})]},n.id))}),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:t,variant:"loadMore",loaderMarginTop:"mt-14",size:"sm"})]})]})}const CompactCredits=reactExports.memo(({credits:e={}})=>{var s,t,n,i;return jsxRuntimeExports.jsxs("div",{className:"mt-16 flex flex-col gap-14 border-t pt-16",children:[(s=e.creators)!=null&&s.length?jsxRuntimeExports.jsx(PeopleDetail,{label:jsxRuntimeExports.jsx(Trans,{message:"Created by"}),children:jsxRuntimeExports.jsx(BulletSeparatedItems,{className:"hidden-scrollbar overflow-x-auto",children:e.creators.slice(0,3).map(a=>jsxRuntimeExports.jsx(PersonLink,{person:a,color:"primary",className:"whitespace-nowrap"},a.id))})}):null,(t=e.directing)!=null&&t.length?jsxRuntimeExports.jsx(PeopleDetail,{label:jsxRuntimeExports.jsx(Trans,{message:"[one Director|other Directors]",values:{count:e.directing.length}}),children:jsxRuntimeExports.jsx(BulletSeparatedItems,{className:"hidden-scrollbar overflow-x-auto",children:e.directing.slice(0,3).map(a=>jsxRuntimeExports.jsx(PersonLink,{person:a,color:"primary",className:"whitespace-nowrap"},a.id))})}):null,(n=e.writing)!=null&&n.length?jsxRuntimeExports.jsx(PeopleDetail,{label:jsxRuntimeExports.jsx(Trans,{message:"[one Writer|other Writers]",values:{count:e.writing.length}}),children:jsxRuntimeExports.jsx(BulletSeparatedItems,{className:"hidden-scrollbar overflow-x-auto",children:e.writing.slice(0,3).map(a=>jsxRuntimeExports.jsx(PersonLink,{person:a,color:"primary",className:"whitespace-nowrap"},a.id))})}):null,(i=e.actors)!=null&&i.length?jsxRuntimeExports.jsx(PeopleDetail,{label:jsxRuntimeExports.jsx(Trans,{message:"Stars"}),children:jsxRuntimeExports.jsx(BulletSeparatedItems,{className:"hidden-scrollbar overflow-x-auto",children:e.actors.slice(0,3).map(a=>jsxRuntimeExports.jsx(PersonLink,{person:a,color:"primary",className:"whitespace-nowrap"},a.id))})}):null]})});function PeopleDetail({label:e,children:s}){return jsxRuntimeExports.jsxs("div",{className:"flex-shrink-0 gap-24 md:flex",children:[jsxRuntimeExports.jsx("div",{className:"min-w-84 font-bold",children:e}),jsxRuntimeExports.jsx("div",{children:s})]})}function getGenreLink(e,{absolute:s}={}){return getBaseMediaLink(`/genre/${e.name}`,{absolute:s})}function useTitleNews(e){return useQuery({queryKey:["titles",`${e}`,"news"],queryFn:()=>fetchNews(e)})}function fetchNews(e){return apiClient.get(`titles/${e}/news`).then(s=>s.data)}function TitleNews({title:e}){const{data:s,isLoading:t}=useTitleNews(e.id);return!t&&!(s!=null&&s.news_articles.length)?null:jsxRuntimeExports.jsxs("section",{className:"mt-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{children:jsxRuntimeExports.jsx(Trans,{message:"Related news"})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-24",children:s==null?void 0:s.news_articles.map(n=>jsxRuntimeExports.jsx(NewsArticleGridItem,{article:n},n.id))})]})}function escapeText(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function escapeAttr(e){return e.replace(/"/g,"&quot;")}function attributesToString(e){const s=[];for(const t in e){let n=e[t]+"";s.push(`${t}="${escapeAttr(n)}"`)}return s.join(" ")}function defaultRender(e){let{tagName:s,attributes:t,content:n}=e;return`<${s} ${attributesToString(t)}>${escapeText(n)}</${s}>`}function linkifyStr(e,s){s===void 0&&(s={}),s=new Options(s,defaultRender);const t=tokenize(e),n=[];for(let i=0;i<t.length;i++){const a=t[i];a.t==="nl"&&s.get("nl2br")?n.push(`<br>
`):!a.isLink||!s.check(a)?n.push(escapeText(a.toString())):n.push(s.render(a))}return n.join("")}String.prototype.linkify||Object.defineProperty(String.prototype,"linkify",{writable:!1,value:function(s){return linkifyStr(this,s)}});function useLinkifiedString(e){return reactExports.useMemo(()=>e&&linkifyStr(e,{nl2br:!0,attributes:{rel:"nofollow"}}),[e])}function TruncatedDescription({description:e,className:s}){const t=useLinkifiedString(e),n=reactExports.useRef(null),i=reactExports.useRef(null),[a,o]=reactExports.useState(!1),[x,l]=reactExports.useState(!1);return $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{var d,p;const c=((d=n.current)==null?void 0:d.getBoundingClientRect().height)||0;(((p=n.current)==null?void 0:p.scrollHeight)||0)>c&&o(!0)},[]),t?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:n,className:clsx("relative",s,!x&&"max-h-160 overflow-hidden",!x&&a&&"after:absolute after:bottom-0 after:left-0 after:h-20 after:w-full after:bg-gradient-to-b after:from-transparent after:to-background"),children:jsxRuntimeExports.jsx("div",{ref:i,dangerouslySetInnerHTML:{__html:t}})}),a&&jsxRuntimeExports.jsx(Button,{size:"xs",className:"mt-20",variant:"outline",onClick:()=>l(!x),children:x?jsxRuntimeExports.jsx(Trans,{message:"Show less"}):jsxRuntimeExports.jsx(Trans,{message:"Show more"})})]}):null}const NewReviewForm=reactExports.forwardRef(({reviewable:e,currentReview:s,className:t,disabled:n},i)=>{const[a,o]=reactExports.useState(!1),{user:x}=useAuth(),l=useForm({defaultValues:{score:8}});reactExports.useEffect(()=>{s&&(l.setValue("title",s.title),l.setValue("body",s.body),l.setValue("score",s.score))},[l,s]);const c=reactExports.useCallback(()=>{o(!0)},[]);reactExports.useImperativeHandle(i,()=>({openReviewPanel:c}),[c]);const u=useCreateReview(l);return jsxRuntimeExports.jsxs(Form,{className:clsx("rounded border bg-alt p-14",t),form:l,onSubmit:d=>{n||u.mutate({...d,reviewable:e},{onSuccess:()=>{toast(message("Review posted")),o(!1)}})},children:[jsxRuntimeExports.jsxs("div",{className:"items-center gap-24 lg:flex",children:[jsxRuntimeExports.jsx(Avatar,{size:"xl",circle:!0,src:x==null?void 0:x.avatar,label:x==null?void 0:x.display_name}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx("div",{className:"mb-4 text-xs text-muted max-md:mt-10",children:jsxRuntimeExports.jsx(Trans,{message:"Review as :name",values:{name:jsxRuntimeExports.jsx("span",{className:"font-medium text",children:x==null?void 0:x.display_name})}})}),jsxRuntimeExports.jsx(StarSelector,{readonly:n,className:"-ml-8 max-lg:mb-12",count:10,value:n?0:l.watch("score"),onValueChange:d=>{l.setValue("score",d)}})]}),!a&&jsxRuntimeExports.jsx(Button,{variant:"flat",color:"primary",onClick:()=>c(),disabled:!x||n,children:s?jsxRuntimeExports.jsx(Trans,{message:"Update review"}):jsxRuntimeExports.jsx(Trans,{message:"Add review"})})]}),a&&jsxRuntimeExports.jsxs("div",{className:"mt-24",children:[jsxRuntimeExports.jsx(FormTextField,{name:"title",className:"mb-24",label:jsxRuntimeExports.jsx(Trans,{message:"Title"}),labelSuffix:jsxRuntimeExports.jsx(Trans,{message:"10 character minimum"}),autoFocus:!0,minLength:10,required:!0}),jsxRuntimeExports.jsx(FormTextField,{name:"body",label:jsxRuntimeExports.jsx(Trans,{message:"Review"}),labelSuffix:jsxRuntimeExports.jsx(Trans,{message:"100 character minimum"}),inputElementType:"textarea",rows:5,minLength:100,required:!0}),jsxRuntimeExports.jsxs("div",{className:"mt-16 flex items-center justify-end gap-8",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",className:"min-w-100",onClick:()=>{o(!1),l.reset(s)},children:jsxRuntimeExports.jsx(Trans,{message:"Cancel"})}),jsxRuntimeExports.jsx(Button,{type:"submit",variant:"flat",color:"primary",className:"min-w-100",disabled:u.isPending,children:jsxRuntimeExports.jsx(Trans,{message:"Post"})})]})]})]})});function useSubmitReviewFeedback(e){return useMutation({mutationFn:s=>submitFeedback(s,e),onSuccess:()=>{toast(message("Feedback submitted"))},onError:s=>showHttpErrorToast(s)})}function submitFeedback(e,s){return apiClient.post(`reviews/${s.id}/feedback`,{is_helpful:e.isHelpful}).then(t=>t.data)}function useSubmitReport(e){return useMutation({mutationFn:s=>submitReport(e,s),onSuccess:()=>{toast(message("Thanks for reporting. We will review this content."))},onError:s=>showHttpErrorToast(s)})}function submitReport(e,s){return apiClient.post("report",{reason:s.reason,model_id:e.id,model_type:e.model_type}).then(t=>t.data)}function useDeleteReport(e){return useMutation({mutationFn:()=>deleteReport(e),onSuccess:()=>{toast(message("Report removed"))},onError:s=>showHttpErrorToast(s)})}function deleteReport(e){return apiClient.delete(`report/${e.model_type}/${e.id}`).then(s=>s.data)}function ReviewListItem$1({review:e,isShared:s,hideShareButton:t,avatar:n}){const i=useIsMobileMediaQuery(),a=reactExports.useRef(null),o=reactExports.useRef(!1);return reactExports.useEffect(()=>{var x;s&&!o.current&&((x=a.current)==null||x.scrollIntoView({behavior:"smooth"}),o.current=!0)},[s]),jsxRuntimeExports.jsxs("div",{ref:a,children:[s&&jsxRuntimeExports.jsx("div",{className:"mb-8 mt-16 text-sm",children:jsxRuntimeExports.jsx(Trans,{message:"Shared review"})}),jsxRuntimeExports.jsxs("div",{className:clsx("group flex min-h-70 items-start gap-24 rounded py-18",s&&"mb-34 border bg-alt"),children:[!i&&(n||jsxRuntimeExports.jsx(UserAvatar,{user:e.user,size:"xl",circle:!0})),jsxRuntimeExports.jsxs("div",{className:"flex-auto text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4 flex items-center gap-8",children:[e.user&&jsxRuntimeExports.jsx(UserDisplayName$1,{user:e.user}),jsxRuntimeExports.jsx("time",{className:"text-xs text-muted",children:jsxRuntimeExports.jsx(FormattedRelativeTime,{date:e.created_at})})]}),jsxRuntimeExports.jsx(TitleRating,{className:"mb-8 mt-10",score:e.score}),e.title&&jsxRuntimeExports.jsx("div",{className:"mb-8 text-base font-medium",children:e.title}),jsxRuntimeExports.jsx("div",{className:"whitespace-break-spaces text-sm",children:e.body}),jsxRuntimeExports.jsxs("div",{className:"mt-16 items-center gap-8 md:flex",children:[jsxRuntimeExports.jsx(Feedback,{review:e}),!t&&jsxRuntimeExports.jsx(ShareButton$3,{review:e}),jsxRuntimeExports.jsx(ReviewOptionsTrigger,{review:e})]})]})]})]})}function ShareButton$3({review:e}){const{base_url:s}=useSettings(),t=useLocation(),n=`${s}${t.pathname}?reviewId=${e.id}`,[,i]=useClipboard(n);return jsxRuntimeExports.jsx(Tooltip,{label:jsxRuntimeExports.jsx(Trans,{message:"Share"}),children:jsxRuntimeExports.jsx(IconButton,{className:"text-muted",onClick:()=>{i(),toast(message("Review link copied to clipboard"))},children:jsxRuntimeExports.jsx(ShareIcon,{})})})}function Feedback({review:e}){const{user:s}=useAuth(),t=useAuthClickCapture(),n=useSubmitReviewFeedback(e),i=n.isPending||s!=null&&s.id===e.user_id,[a,o]=reactExports.useState(e.helpful_count||1),[x,l]=reactExports.useState(e.helpful_count+e.not_helpful_count||1);let c;e.current_user_feedback!=null&&(c=e.current_user_feedback?"helpful":"not_helpful");const[u,d]=reactExports.useState(c);return jsxRuntimeExports.jsxs("div",{className:"mr-auto flex flex-wrap items-center gap-6 max-md:mb-12",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-muted",children:jsxRuntimeExports.jsx(Trans,{message:":helpfulCount out of :total people found this helpful. Was this review helpful?",values:{helpfulCount:a,total:x}})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 pb-2",children:[jsxRuntimeExports.jsx(Button,{variant:"link",className:clsx("uppercase",u==="helpful"&&"pointer-events-none"),color:u==="helpful"?"primary":void 0,disabled:i,onClickCapture:t,onClick:()=>n.mutate({isHelpful:!0},{onSuccess:()=>{o(p=>p+1),d("helpful"),u||l(p=>p+1)}}),children:jsxRuntimeExports.jsx(Trans,{message:"Yes"})}),jsxRuntimeExports.jsx("div",{className:"h-14 w-1 bg-divider"}),jsxRuntimeExports.jsx(Button,{variant:"link",className:clsx("uppercase",u==="not_helpful"&&"pointer-events-none"),color:u==="not_helpful"?"primary":void 0,disabled:i,onClickCapture:t,onClick:()=>n.mutate({isHelpful:!1},{onSuccess:()=>{o(p=>p-1),d("not_helpful"),u||l(p=>p+1)}}),children:jsxRuntimeExports.jsx(Trans,{message:"No"})})]})]})}function ReviewOptionsTrigger({review:e}){const{user:s,hasPermission:t}=useAuth(),n=useSubmitReport(e),i=useDeleteReport(e),[a,o]=reactExports.useState(e.current_user_reported),x=()=>{a?i.mutate(void 0,{onSuccess:()=>o(!1)}):n.mutate({},{onSuccess:()=>o(!0)})},l=useDeleteReviews(),[c,u]=reactExports.useState(!1),d=s&&e.user_id===s.id||t("reviews.delete"),p=h=>{u(!1),h&&l.mutate({reviewIds:[e.id]})};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsxs(MenuTrigger,{children:[jsxRuntimeExports.jsx(IconButton,{className:"text-muted","aria-label":"More options",children:jsxRuntimeExports.jsx(MoreVertIcon,{})}),jsxRuntimeExports.jsxs(Menu,{children:[jsxRuntimeExports.jsx(Item,{value:"report",onSelected:()=>x(),children:a?jsxRuntimeExports.jsx(Trans,{message:"Remove report"}):jsxRuntimeExports.jsx(Trans,{message:"Report review"})}),d&&jsxRuntimeExports.jsx(Item,{value:"delete",onSelected:()=>u(!0),children:jsxRuntimeExports.jsx(Trans,{message:"Delete"})})]})]}),jsxRuntimeExports.jsx(DialogTrigger,{type:"modal",isOpen:c,onClose:h=>p(h),children:jsxRuntimeExports.jsx(ConfirmationDialog,{isDanger:!0,title:jsxRuntimeExports.jsx(Trans,{message:"Delete review?"}),body:jsxRuntimeExports.jsx(Trans,{message:"Are you sure you want to delete this review?"}),confirm:jsxRuntimeExports.jsx(Trans,{message:"Delete"})})})]})}function UserDisplayName$1({user:e}){const s=useIsMobileMediaQuery(),{auth:t}=reactExports.useContext(SiteConfigContext),n="flex items-center gap-8 text-base font-medium";return t.getUserProfileLink?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[s&&jsxRuntimeExports.jsx(UserAvatar,{user:e,size:"sm",circle:!0}),jsxRuntimeExports.jsx(Link,{to:t.getUserProfileLink(e),className:clsx("hover:underline",n),children:e.display_name})]}):jsxRuntimeExports.jsxs("div",{className:n,children:[s&&jsxRuntimeExports.jsx(UserAvatar,{user:e,size:"sm",circle:!0}),e.display_name]})}function AccountRequiredCard({message:e}){const{user:s}=useAuth();return s?null:jsxRuntimeExports.jsxs("div",{className:"border border-dashed py-30 px-20 my-40 mx-auto text-center max-w-850 rounded",children:[jsxRuntimeExports.jsx("div",{className:"text-xl font-semibold mb-8",children:jsxRuntimeExports.jsx(Trans,{message:"Account required"})}),jsxRuntimeExports.jsx("div",{className:"text-muted text-base",children:jsxRuntimeExports.jsx(Trans,{...e,values:{l:t=>jsxRuntimeExports.jsx(Link,{className:LinkStyle,to:"/login",children:t}),r:t=>jsxRuntimeExports.jsx(Link,{className:LinkStyle,to:"/register",children:t})}})})]})}const accountRequiredMessage$1=message("Please <l>login</l> or <r>create account</r> to add a review");function ReviewList({reviewable:e,disabled:s,noResultsMessage:t,showAccountRequiredMessage:n}){var c,u;const i=useReviews(e),a=reactExports.useRef(null),{user:o}=useAuth(),x=(c=i.data)==null?void 0:c.pages[0].current_user_review,l=(u=i.data)==null?void 0:u.pages[0].shared_review;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(NewReviewForm,{className:"mb-14 md:-mx-14",reviewable:e,currentReview:x,ref:a,disabled:s}),jsxRuntimeExports.jsxs("div",{children:[n&&jsxRuntimeExports.jsx(AccountRequiredCard,{message:accountRequiredMessage$1}),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:i.isLoading?jsxRuntimeExports.jsx(ReviewListSkeletons,{count:4}):jsxRuntimeExports.jsx(ReviewListItems,{reviews:i.items,sharedReview:l,noResultsMessage:t})}),jsxRuntimeExports.jsx("div",{className:"ml-84",children:jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:i,variant:"loadMore",loaderMarginTop:"mt-14",loadMoreExtraContent:jsxRuntimeExports.jsx(Button,{variant:"flat",color:"primary",disabled:!o,onClick:()=>{var d;(d=a.current)==null||d.openReviewPanel()},children:jsxRuntimeExports.jsx(Trans,{message:"Add a review"})})})})]})]})}function ReviewListItems({reviews:e,sharedReview:s,noResultsMessage:t}){const{user:n}=useAuth();let i;return e.length?i=e.map(a=>jsxRuntimeExports.jsx(ReviewListItem$1,{review:a},a.id)):i=n?t||jsxRuntimeExports.jsx(IllustratedMessage,{className:"mt-24",size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"Seems a little quiet over here"}),description:jsxRuntimeExports.jsx(Trans,{message:"Be the first to leave a review"})}):null,jsxRuntimeExports.jsxs(m.div,{...opacityAnimation,children:[s&&jsxRuntimeExports.jsx(ReviewListItem$1,{review:s,isShared:!0}),i]},"reviews")}function ReviewListSkeletons({count:e}){return jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:[...new Array(e).keys()].map(s=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-24 py-18 min-h-[212px] group",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"avatar",radius:"rounded-full",size:"w-60 h-60"}),jsxRuntimeExports.jsxs("div",{className:"flex-auto text-sm",children:[jsxRuntimeExports.jsx(Skeleton,{className:"text-base font-medium max-w-200 mb-4",variant:"text"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",className:"max-w-60 mb-8 mt-10 text-lg"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text",className:"mb-8 text-base max-w-240"}),jsxRuntimeExports.jsx(Skeleton,{className:"text-sm",variant:"text"}),jsxRuntimeExports.jsx(Skeleton,{className:"text-sm",variant:"text"}),jsxRuntimeExports.jsx(Skeleton,{className:"text-xs mt-16",variant:"text"})]})]},s))},"loading-skeleton")}function TitlePageReviewList({title:e}){const[s,t]=useLocalStorage(`reviewSort.${e.model_type}`,"created_at:desc"),n=useReviews(e);return jsxRuntimeExports.jsxs("div",{className:"mt-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{titleAppend:n.totalItems?jsxRuntimeExports.jsxs("span",{children:["(",n.totalItems,")"]}):null,actions:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-24",children:[jsxRuntimeExports.jsx(TitleRating,{score:e.rating,className:"max-md:hidden"}),jsxRuntimeExports.jsx(ReviewListSortButton,{value:s,onValueChange:i=>t(i)})]}),children:jsxRuntimeExports.jsx(Trans,{message:"Reviews"})}),jsxRuntimeExports.jsx(ReviewList,{reviewable:e,showAccountRequiredMessage:e.status!=="upcoming",noResultsMessage:e.status==="upcoming"?jsxRuntimeExports.jsx(IllustratedMessage,{className:"mt-24",size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"This title is not released yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Come back after :date to see the reviews",values:{date:jsxRuntimeExports.jsx(FormattedDate,{date:e.release_date})}})}):void 0})]})}function TitlePageVideoGrid({title:e,episode:s}){const t=s?s.videos:e.videos,n=s?`${getEpisodeLink(e,s.season_number,s.episode_number)}/episodes/${s.id}/videos`:`${getTitleLink(e)}/videos`;return jsxRuntimeExports.jsx(VideoGrid,{videos:t,title:e,episode:s,heading:jsxRuntimeExports.jsx(SiteSectionHeading,{link:n,children:jsxRuntimeExports.jsx(Trans,{message:"Videos"})})})}function TitlePageEpisodeGrid({data:e,label:s,showSeasonSelector:t}){const[n,i]=reactExports.useState(1),a=useSeasonEpisodes(e.episodes,{perPage:21,excludeDescription:"true"},{season:n,willSortOrFilter:!0,defaultOrderBy:"episode_number",defaultOrderDir:"asc",titleId:e.title.id}),{isInitialLoading:o,items:x,sortDescriptor:l,setSortDescriptor:c}=a;return jsxRuntimeExports.jsxs("div",{className:"mt-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{actions:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[t&&jsxRuntimeExports.jsx(SeasonSelector,{selectedSeason:n,onSeasonChange:i,seasonCount:e.title.seasons_count}),jsxRuntimeExports.jsx(SortButton,{value:`${l.orderBy}:${l==null?void 0:l.orderDir}`,onValueChange:u=>{const[d,p]=u.split(":");c({orderBy:d,orderDir:p})}})]}),children:s||jsxRuntimeExports.jsx(Trans,{message:"Episodes"})}),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:o?jsxRuntimeExports.jsx(SkeletonGrid,{}):jsxRuntimeExports.jsx(EpisodeGrid,{episodes:x,title:e.title,query:a})})]})}function GridItem({episode:e,title:s}){const t=e.runtime||s.runtime,n=jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(CompactSeasonEpisode,{className:"uppercase",episode:e})," -"," ",e.name]});return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx(EpisodePoster,{episode:e,title:s,srcSize:"md",showPlayButton:!0,rightAction:t?jsxRuntimeExports.jsx("span",{className:"rounded bg-black/50 p-4 text-xs font-medium text-white",children:jsxRuntimeExports.jsx(FormattedDuration,{minutes:t,verbose:!0})}):null})}),jsxRuntimeExports.jsxs("div",{className:"mt-10",children:[e.release_date&&jsxRuntimeExports.jsx("div",{className:"mb-2 text-sm text-muted",children:jsxRuntimeExports.jsx(FormattedDate,{date:e.release_date})}),jsxRuntimeExports.jsx("div",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap text-base",children:e.primary_video?jsxRuntimeExports.jsx(Link,{className:"rounded outline-none hover:underline focus-visible:ring focus-visible:ring-offset-2",to:getWatchLink(e.primary_video),children:n}):n})]})]})}function EpisodeGrid({title:e,episodes:s,query:t}){return jsxRuntimeExports.jsxs(m.div,{...opacityAnimation,children:[jsxRuntimeExports.jsx(ContentGridLayout,{variant:"landscape",children:s.map(n=>jsxRuntimeExports.jsx(GridItem,{episode:n,title:e},n.id))}),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:t,variant:"loadMore",size:"sm",loaderMarginTop:"mt-16"})]},"episode-grid")}function SkeletonGrid(){return jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:jsxRuntimeExports.jsx(ContentGridLayout,{variant:"landscape",children:[...new Array(6).keys()].map(e=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"aspect-video",animation:"pulsate"}),jsxRuntimeExports.jsxs("div",{className:"mt-10 min-h-44",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"text"}),jsxRuntimeExports.jsx(Skeleton,{variant:"text"})]})]},e))})},"episode-grid")}function SeasonSelector({selectedSeason:e,onSeasonChange:s,seasonCount:t}){return jsxRuntimeExports.jsxs(MenuTrigger,{selectedValue:e,onSelectionChange:n=>s(n),selectionMode:"single",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",startIcon:jsxRuntimeExports.jsx(ExpandMoreIcon,{}),className:"mr-4",children:jsxRuntimeExports.jsx(Trans,{message:"Season :number",values:{number:e}})}),jsxRuntimeExports.jsx(Menu,{children:[...new Array(t).keys()].map(n=>{const i=n+1;return jsxRuntimeExports.jsx(Item,{value:i,children:jsxRuntimeExports.jsx(Trans,{message:"Season :number",values:{number:i}})},i)})})]})}const SortOptions=[{value:"episode_number:desc",label:message("Newest")},{value:"episode_number:asc",label:message("Oldest")}];function SortButton({value:e,onValueChange:s}){let t=SortOptions.find(n=>n.value===e);return t||(t=SortOptions[0]),jsxRuntimeExports.jsxs(MenuTrigger,{selectedValue:e,onSelectionChange:n=>s(n),selectionMode:"single",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",startIcon:jsxRuntimeExports.jsx(SortIcon,{}),children:jsxRuntimeExports.jsx(Trans,{...t.label})}),jsxRuntimeExports.jsx(Menu,{children:SortOptions.map(n=>jsxRuntimeExports.jsx(Item,{value:n.value,children:jsxRuntimeExports.jsx(Trans,{...n.label})},n.value))})]})}function useConfiguredTitlePageSections(){const{title_page:e}=useSettings();return reactExports.useMemo(()=>e!=null&&e.sections?JSON.parse(e.sections):[],[e==null?void 0:e.sections])}function TitlePageMainContent({data:e,className:s}){var a;const{title:t,credits:n}=e,i=useConfiguredTitlePageSections();return jsxRuntimeExports.jsxs("main",{className:clsx(s,"@container"),children:[(a=t.genres)!=null&&a.length?jsxRuntimeExports.jsx(ChipList,{children:t.genres.map(o=>jsxRuntimeExports.jsx(Chip,{className:"capitalize",elementType:Link,to:getGenreLink(o),children:jsxRuntimeExports.jsx(Trans,{message:o.display_name||o.name})},o.id))}):null,t.tagline&&jsxRuntimeExports.jsxs("blockquote",{className:"mt-16",children:["",t.tagline,""]}),jsxRuntimeExports.jsx(TruncatedDescription,{className:"mt-16",description:t.description}),jsxRuntimeExports.jsx(CompactCredits,{credits:n}),jsxRuntimeExports.jsx(AdHost,{slot:"title_top",className:"pt-48"}),i.map(o=>jsxRuntimeExports.jsx(TitlePageSection,{name:o,title:t,data:e},o))]})}function TitlePageSection({name:e,title:s,data:t}){var a;const{titles:n}=useSettings(),{hasPermission:i}=useAuth();switch(e){case"episodes":return s.is_series?jsxRuntimeExports.jsx(TitlePageEpisodeGrid,{data:t,showSeasonSelector:!0}):null;case"seasons":return s.is_series?jsxRuntimeExports.jsx(TitlePageSeasonGrid,{data:t}):null;case"videos":return jsxRuntimeExports.jsx(TitlePageVideoGrid,{title:s});case"images":return jsxRuntimeExports.jsx(TitlePageImageGrid,{images:s.images,heading:jsxRuntimeExports.jsx(SiteSectionHeading,{link:`${getTitleLink(s)}/images`,children:jsxRuntimeExports.jsx(Trans,{message:"Images"})})});case"reviews":return n.enable_reviews&&i("reviews.view")?jsxRuntimeExports.jsx(TitlePageReviewList,{title:s}):null;case"cast":return jsxRuntimeExports.jsx(TitlePageCast,{credits:(a=t.credits)==null?void 0:a.actors});case"news":return jsxRuntimeExports.jsx(TitleNews,{title:s});case"related":return jsxRuntimeExports.jsx(RelatedTitlesPanel,{title:s})}}function TitlePageHeaderLayout({name:e,description:s,children:t,right:n,poster:i}){return jsxRuntimeExports.jsxs("div",{className:"mb-24 items-center justify-between gap-24 lg:flex",children:[i,jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[t,jsxRuntimeExports.jsx("h1",{className:"mb-12 text-4xl md:mb-8 md:text-5xl",children:e}),s&&jsxRuntimeExports.jsx("div",{className:"text-base font-normal",children:s})]}),n]})}function TitlePageHeader({title:e,showPoster:s=!1}){return jsxRuntimeExports.jsx(TitlePageHeaderLayout,{name:jsxRuntimeExports.jsx(TitleLink,{title:e}),poster:s?jsxRuntimeExports.jsx(TitlePoster,{title:e,size:"w-80",srcSize:"sm"}):null,description:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(BulletSeparatedItems,{children:[jsxRuntimeExports.jsx(FormattedDate,{date:e.release_date}),e.certification&&jsxRuntimeExports.jsx("div",{className:"uppercase",children:e.certification}),e.runtime&&jsxRuntimeExports.jsx(FormattedDuration,{minutes:e.runtime,verbose:!0})]})}),right:jsxRuntimeExports.jsx(InteractableRating,{title:e})})}function TitlePageHeaderImage({title:e,season:s,episode:t}){const{streaming:n}=useSettings(),i=t||s||e;if(!((t==null?void 0:t.poster)||e.backdrop))return null;const o=jsxRuntimeExports.jsx(TitleBackdrop,{title:e,episode:t,size:"w-full h-full",className:"object-top",lazy:!1});return jsxRuntimeExports.jsxs("header",{className:"relative isolate max-h-320 overflow-hidden bg-black md:max-h-400 lg:max-h-450",children:[jsxRuntimeExports.jsx("div",{className:"container relative left-0 right-0 top-0 z-20 mx-auto h-full w-full px-24",children:o}),jsxRuntimeExports.jsx("div",{className:"h-[calc(100% + 20px)] absolute left-1/2 top-1/2 z-10 w-[calc(100%+100px)] -translate-x-1/2 -translate-y-1/2 bg-black opacity-50 blur-md",children:o}),jsxRuntimeExports.jsx("div",{className:"pointer-events-none absolute left-0 top-0 z-30 h-full w-full bg-gradient-to-b from-black/20 md:from-black/40"}),n!=null&&n.show_header_play&&(i!=null&&i.primary_video)?jsxRuntimeExports.jsx(PlayButton,{item:i}):null]})}function PlayButton({item:e}){const s=getWatchLink(e.primary_video);return jsxRuntimeExports.jsx(IconButton,{radius:"rounded-full",color:"white",variant:"raised",size:"lg",className:"absolute inset-0 z-40 m-auto",elementType:Link,to:s,children:jsxRuntimeExports.jsx(MediaPlayIcon,{})})}function useCurrentUserWatchlist(){const{user:e}=useAuth();return useQuery({queryKey:["channel","watchlist","compact"],queryFn:()=>fetchWatchlist(),enabled:!!e})}function useIsItemWatchlisted(e){var t,n,i;const s=useCurrentUserWatchlist();return{isLoading:s.isLoading&&s.fetchStatus!=="idle",isWatchlisted:!!((i=(n=(t=s.data)==null?void 0:t.watchlist)==null?void 0:n.items[e.model_type])!=null&&i[e.id])}}function fetchWatchlist(){return apiClient.get("users/me/watchlist").then(e=>e.data)}function useAddToWatchlist(){const{data:e}=useCurrentUserWatchlist();return useMutation({mutationFn:s=>addToWatchlist(e.watchlist.id,s),onSuccess:async()=>{await queryClient.invalidateQueries({queryKey:["channel","watchlist"]}),toast(message("Added to your watchlist"))},onError:s=>showHttpErrorToast(s)})}function addToWatchlist(e,s){return apiClient.post(`channel/${e}/add`,{itemId:s.id,itemType:s.model_type}).then(t=>t.data)}function useRemoveFromWatchlist(){const{data:e}=useCurrentUserWatchlist();return useMutation({mutationFn:s=>removeFromWatchlist(e.watchlist.id,s),onSuccess:async()=>{await queryClient.invalidateQueries({queryKey:["channel","watchlist"]}),toast(message("Removed from your watchlist"))},onError:s=>showHttpErrorToast(s)})}function removeFromWatchlist(e,s){return apiClient.post(`channel/${e}/remove`,{itemId:s.id,itemType:s.model_type}).then(t=>t.data)}function WatchlistButton({item:e,variant:s="flat",color:t="primary"}){const{isLoading:n,isWatchlisted:i}=useIsItemWatchlisted(e),a=useAddToWatchlist(),o=useRemoveFromWatchlist(),x=useAuthClickCapture();return jsxRuntimeExports.jsx(Button,{variant:s,color:t,startIcon:i?jsxRuntimeExports.jsx(CheckIcon,{}):jsxRuntimeExports.jsx(AddIcon,{}),className:"mt-14 min-h-40 w-full",disabled:a.isPending||o.isPending||n,onClickCapture:x,onClick:()=>{i?o.mutate(e):a.mutate(e)},children:i?jsxRuntimeExports.jsx(Trans,{message:"In watchlist"}):jsxRuntimeExports.jsx(Trans,{message:"Add to watchlist"})})}function TitlePageAsideLayout({poster:e,children:s,className:t}){return jsxRuntimeExports.jsxs("div",{className:clsx("top-40 flex-shrink-0 md:sticky md:w-1/4",t),children:[e,jsxRuntimeExports.jsx("div",{className:"flex-auto max-md:ml-16 max-md:text-sm",children:s})]})}function DetailItem({label:e,children:s}){return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx("dt",{className:"font-semibold",children:e}),jsxRuntimeExports.jsx("dl",{className:"mb-12 md:mb-24",children:s})]})}function KeywordLink({keyword:e,children:s,...t}){const n=reactExports.useMemo(()=>getKeywordLink$1(e),[e]);return jsxRuntimeExports.jsx(BaseMediaLink,{...t,link:n,children:s??jsxRuntimeExports.jsx(Trans,{message:e.display_name||e.name})})}function getKeywordLink$1(e,{absolute:s}={}){return getBaseMediaLink(`/keyword/${e.name}`,{absolute:s})}function ProductionCountryLink({country:e,children:s,...t}){const n=reactExports.useMemo(()=>getKeywordLink(e),[e]);return jsxRuntimeExports.jsx(BaseMediaLink,{...t,link:n,children:s??(e.display_name||e.name)})}function getKeywordLink(e,{absolute:s}={}){return getBaseMediaLink(`/production-countries/${e.name}`,{absolute:s})}function WatchNowButton({video:e,variant:s="outline",color:t="primary",size:n="w-full min-h-40 mt-14",defaultLabel:i}){const a=e.episode_num&&!i?jsxRuntimeExports.jsxs("span",{className:"inline-flex gap-4",children:[jsxRuntimeExports.jsx(Trans,{message:"Start watching"}),jsxRuntimeExports.jsx(CompactSeasonEpisode,{seasonNum:e.season_num,episodeNum:e.episode_num})]}):jsxRuntimeExports.jsx(Trans,{message:"Watch now"});return jsxRuntimeExports.jsx(Button,{to:getWatchLink(e),elementType:Link,startIcon:jsxRuntimeExports.jsx(MediaPlayIcon,{}),color:t,variant:s,className:n,children:a})}function useIsStreamingMode(){const{streaming:e}=useSettings();return(e==null?void 0:e.prefer_full)||!1}function TitlePageAside({data:{title:e,language:s},className:t}){var a,o;const n=useIsStreamingMode(),{hasPermission:i}=useAuth();return jsxRuntimeExports.jsxs(TitlePageAsideLayout,{className:t,poster:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(TitlePoster,{title:e,size:"w-full",srcSize:"lg"}),i("titles.update")&&jsxRuntimeExports.jsx(IconButton,{elementType:Link,to:`/admin/titles/${e.id}/edit`,className:"absolute bottom-6 right-4",color:"white",children:jsxRuntimeExports.jsx(EditIcon,{})})]}),children:[n&&e.primary_video&&jsxRuntimeExports.jsx(WatchNowButton,{video:e.primary_video,variant:"flat"}),jsxRuntimeExports.jsx(WatchlistButton,{item:e,variant:n?"outline":"flat"}),jsxRuntimeExports.jsx(ShareButton$2,{title:e}),jsxRuntimeExports.jsxs("dl",{className:"mt-14",children:[s&&jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Original language"}),children:jsxRuntimeExports.jsx(Trans,{message:s})}),e.original_title!==e.name&&jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Original title"}),children:e.original_title}),e.budget?jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Budget"}),children:jsxRuntimeExports.jsx(FormattedCurrency,{value:e.budget,currency:"usd"})}):null,e.revenue?jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Revenue"}),children:jsxRuntimeExports.jsx(FormattedCurrency,{value:e.revenue,currency:"usd"})}):null,(a=e.production_countries)!=null&&a.length?jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Production countries"}),children:jsxRuntimeExports.jsx("ul",{className:"mt-12 flex flex-wrap gap-8",children:e.production_countries.map(x=>jsxRuntimeExports.jsx("li",{className:"w-max rounded-full border px-10 py-4 text-xs",children:jsxRuntimeExports.jsx(ProductionCountryLink,{country:x})},x.id))})}):null,(o=e.keywords)!=null&&o.length?jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Keywords"}),children:jsxRuntimeExports.jsx("ul",{className:"mt-12 flex flex-wrap gap-8",children:e.keywords.map(x=>jsxRuntimeExports.jsx("li",{className:"w-max rounded-full border px-10 py-4 text-xs",children:jsxRuntimeExports.jsx(KeywordLink,{keyword:x})},x.id))})}):null]})]})}function ShareButton$2({title:e}){const s=getTitleLink(e,{absolute:!0});return jsxRuntimeExports.jsx(ShareMenuTrigger,{link:s,children:jsxRuntimeExports.jsx(Button,{variant:"outline",color:"primary",startIcon:jsxRuntimeExports.jsx(ShareIcon,{}),className:"mt-14 min-h-40 w-full",children:jsxRuntimeExports.jsx(Trans,{message:"Share"})})})}function TitlePage(){const e=useTitle("titlePage"),s=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$b,{data:e.data})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:s})}function PageContent$b({data:e}){return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:e.title}),jsxRuntimeExports.jsx("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:jsxRuntimeExports.jsxs("div",{className:"items-start gap-54 md:flex",children:[jsxRuntimeExports.jsx(TitlePageAside,{data:e,className:"max-lg:hidden"}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx(TitlePageHeader,{title:e.title}),jsxRuntimeExports.jsx(TitlePageMainContent,{data:e})]})]})})]})}function SeasonPage(){const e=useSeason("seasonPage"),s=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$a,{data:e.data})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:s})}function PageContent$a({data:e}){const{title:s,season:t}=e;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:s,season:t}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:[jsxRuntimeExports.jsxs("div",{className:"mb-24 flex items-center gap-12",children:[jsxRuntimeExports.jsx(TitlePoster,{size:"w-70",srcSize:"sm",title:s}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitleLink,{title:s,color:"primary",className:"text-xl"}),jsxRuntimeExports.jsx("div",{className:"text-lg",children:jsxRuntimeExports.jsx(Trans,{message:"Episode list"})})]})]}),jsxRuntimeExports.jsx(SeasonList,{title:s}),jsxRuntimeExports.jsx(EpisodeList$1,{data:e}),jsxRuntimeExports.jsx(SeasonList,{title:s})]})]})}function SeasonList({title:e}){const{season:s}=useParams();return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"mb-4 text-base font-semibold",children:[jsxRuntimeExports.jsx(Trans,{message:"Seasons"}),":"]}),jsxRuntimeExports.jsx("div",{className:"mb-34 flex items-center gap-10",children:[...new Array(e.seasons_count).keys()].map(t=>{const n=t+1,i=s===`${n}`;return jsxRuntimeExports.jsx(SeasonLink,{title:e,seasonNumber:n,className:clsx("flex h-30 w-30 flex-shrink-0 items-center justify-center rounded border text-base",i?"pointer-events-none bg-primary text-white":"text-primary"),children:n},n)})})]})}function EpisodeList$1({data:{episodes:e,title:s}}){const t=useSeasonEpisodes(e);return jsxRuntimeExports.jsxs("main",{children:[t.items.map(n=>jsxRuntimeExports.jsx(EpisodeListItem,{episode:n,title:s,allowRating:!0,showPlayButton:!0,className:"mb-34"},n.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:t})]})}function EpisodePageHeader({title:e,episode:s,showPoster:t}){const n=useNavigate(),i=s.runtime||e.runtime;return jsxRuntimeExports.jsx(TitlePageHeaderLayout,{poster:t?jsxRuntimeExports.jsx(TitlePoster,{title:e,size:"w-80",srcSize:"sm"}):void 0,name:s.name,description:jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"my-10 md:my-0",children:[jsxRuntimeExports.jsx(Trans,{message:"Aired :date",values:{date:jsxRuntimeExports.jsx(FormattedDate,{date:s.release_date})}}),jsxRuntimeExports.jsx("span",{className:"uppercase",children:e.certification}),i?jsxRuntimeExports.jsx(FormattedDuration,{minutes:i,verbose:!0}):null]}),right:jsxRuntimeExports.jsx(InteractableRating,{title:e,episode:s}),children:jsxRuntimeExports.jsxs(Breadcrumb,{isNavigation:!0,children:[jsxRuntimeExports.jsx(BreadcrumbItem,{onSelected:()=>n(getTitleLink(e)),children:e.name}),jsxRuntimeExports.jsx(BreadcrumbItem,{onSelected:()=>n(getSeasonLink(e,s.season_number)),children:jsxRuntimeExports.jsx(Trans,{message:"Season :number",values:{number:s.season_number}})}),jsxRuntimeExports.jsx(BreadcrumbItem,{children:jsxRuntimeExports.jsx(Trans,{message:"Episode :number",values:{number:s.episode_number}})})]})})}function EpisodePage(){const e=useEpisode("episodePage"),s=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$9,{data:e.data})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:s})}function PageContent$9({data:e}){const{episode:s,title:t}=e;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:t,episode:s}),jsxRuntimeExports.jsx("div",{className:"container mx-auto mt-12 px-14 md:mt-40 md:px-24",children:jsxRuntimeExports.jsxs("div",{className:"items-start gap-54 md:flex",children:[jsxRuntimeExports.jsx(Aside,{title:t,episode:s}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx(EpisodePageHeader,{title:t,episode:s}),jsxRuntimeExports.jsx(MainContent,{data:e})]})]})})]})}function MainContent({data:e}){var a;const{episode:s,title:t,credits:n}=e,i=useConfiguredTitlePageSections();return jsxRuntimeExports.jsxs("main",{className:"@container",children:[(a=t.genres)!=null&&a.length?jsxRuntimeExports.jsx(ChipList,{children:t.genres.map(o=>jsxRuntimeExports.jsx(Chip,{className:"capitalize",elementType:Link,to:getGenreLink(o),children:o.display_name||o.name},o.id))}):null,jsxRuntimeExports.jsx(TruncatedDescription,{className:"mt-16",description:s.description}),jsxRuntimeExports.jsx(CompactCredits,{credits:n}),i.map(o=>jsxRuntimeExports.jsx(EpisodePageSection,{name:o,data:e},o))]})}function EpisodePageSection({name:e,data:s}){var t;switch(e){case"videos":return jsxRuntimeExports.jsx(TitlePageVideoGrid,{title:s.title,episode:s.episode});case"cast":return jsxRuntimeExports.jsx(TitlePageCast,{credits:(t=s.credits)==null?void 0:t.actors});case"related":return jsxRuntimeExports.jsx(RelatedTitlesPanel,{title:s.title});case"episodes":return jsxRuntimeExports.jsx(TitlePageEpisodeGrid,{data:s,label:jsxRuntimeExports.jsx(Trans,{message:"Other episodes"})});default:return null}}function Aside({title:e,episode:s}){const t=useIsStreamingMode();return jsxRuntimeExports.jsxs(TitlePageAsideLayout,{className:"max-md:hidden",poster:jsxRuntimeExports.jsx(TitlePoster,{title:e,size:"w-full",srcSize:"lg"}),children:[t&&s.primary_video&&jsxRuntimeExports.jsx(WatchNowButton,{video:s.primary_video,variant:"flat",defaultLabel:!0}),jsxRuntimeExports.jsx(WatchlistButton,{item:e,variant:t?"outline":"flat"})]})}function useWatchPageVideo(){const{videoId:e}=useParams();return useQuery({queryKey:["video","watch-page",e],queryFn:()=>fetchVideo(e),placeholderData:keepPreviousData,initialData:()=>{var t;const s=(t=getBootstrapData().loaders)==null?void 0:t.watchPage;if(s&&`${s.video.id}`===e)return s}})}function fetchVideo(e){return apiClient.get(`watch/${e}`).then(s=>s.data)}function commentsQueryKey(e,s={}){return["comment",`${e.id}-${e.model_type}`,s]}function useComments(e,s={}){return useInfiniteData({queryKey:commentsQueryKey(e,s),endpoint:"commentable/comments",queryParams:{commentable_type:e.model_type,commentable_id:e.id,...s}})}function useCreateComment(){const e=useQueryClient();return useMutation({mutationFn:s=>createComment(s),onSuccess:async(s,t)=>{await e.invalidateQueries({queryKey:["comment",`${t.commentable.id}-${t.commentable.model_type}`]}),toast(message("Comment posted"))},onError:s=>showHttpErrorToast(s)})}function createComment({commentable:e,content:s,inReplyTo:t,...n}){const i={commentable_id:e.id,commentable_type:e.model_type,content:s,inReplyTo:t,...n};return apiClient.post("comment",i).then(a=>a.data)}function NewCommentForm({commentable:e,inReplyTo:s,onSuccess:t,className:n,autoFocus:i,payload:a,...o}){const{trans:x}=useTrans(),{user:l}=useAuth(),c=useCreateComment(),u=$df56164dff5785e2$export$4338b53315abf666(o.inputRef),[d,p]=reactExports.useState(!1),[h,j]=reactExports.useState(""),E=()=>{p(!1),u.current&&(u.current.blur(),j(""))};return jsxRuntimeExports.jsxs("form",{className:clsx("py-6 flex gap-24",n),onSubmit:R=>{R.preventDefault(),h&&!c.isPending&&c.mutate({...a,commentable:e,content:h,inReplyTo:s},{onSuccess:()=>{E(),t==null||t()}})},children:[jsxRuntimeExports.jsx(Avatar,{size:"xl",circle:!0,src:l==null?void 0:l.avatar,label:l==null?void 0:l.display_name}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx("div",{className:"text-xs text-muted mb-10",children:jsxRuntimeExports.jsx(Trans,{message:"Comment as :name",values:{name:jsxRuntimeExports.jsx("span",{className:"font-medium text",children:l==null?void 0:l.display_name})}})}),jsxRuntimeExports.jsx(TextField,{inputRef:u,autoFocus:i,inputElementType:"textarea",inputClassName:"resize-none",value:h,onChange:R=>j(R.target.value),onFocus:()=>p(!0),onBlur:()=>{h||p(!1)},minLength:3,rows:d?3:1,placeholder:x(s?message("Write a reply"):message("Leave a comment"))}),d&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-12 justify-end mt-12",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>E(),children:jsxRuntimeExports.jsx(Trans,{message:"Cancel"})}),jsxRuntimeExports.jsx(Button,{variant:"outline",color:"primary",type:"submit",disabled:c.isPending||h.length<3,children:jsxRuntimeExports.jsx(Trans,{message:"Comment"})})]})]})]})}function useStoreVote(e){return useMutation({mutationFn:s=>changeVote(e,s),onSuccess:s=>{},onError:s=>showHttpErrorToast(s)})}function changeVote(e,s){return apiClient.post("vote",{vote_type:s.voteType,model_id:e.id,model_type:e.model_type}).then(t=>t.data)}function ThumbButtons({model:e,className:s,showUpvotesOnly:t}){const n=useStoreVote(e),[i,a]=reactExports.useState(e.upvotes||0),[o,x]=reactExports.useState(e.downvotes||0),[l,c]=reactExports.useState(e.current_vote),u=d=>{a(d.upvotes),x(d.downvotes),c(d.current_vote)};return jsxRuntimeExports.jsxs("div",{className:clsx(s,"whitespace-nowrap"),children:[jsxRuntimeExports.jsxs(Button,{className:"gap-6",sizeClassName:"px-8 py-4",color:l==="upvote"?"primary":void 0,disabled:n.isPending,"aria-label":"Upvote",onClick:()=>{n.mutate({voteType:"upvote"},{onSuccess:d=>u(d.model)})},children:[jsxRuntimeExports.jsx(ThumbUpIcon,{}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(FormattedNumber,{value:i})})]}),!t&&jsxRuntimeExports.jsxs(Button,{className:"gap-6",sizeClassName:"px-8 py-4",color:l==="downvote"?"primary":void 0,disabled:n.isPending,"aria-label":"Downvote",onClick:()=>{n.mutate({voteType:"downvote"},{onSuccess:d=>u(d.model)})},children:[jsxRuntimeExports.jsx(ThumbDownIcon,{}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(FormattedNumber,{value:o})})]})]})}function CommentListItem$1({comment:e,commentable:s,canDelete:t}){const n=useIsMobileMediaQuery(),{user:i,hasPermission:a}=useAuth(),[o,x]=reactExports.useState(!1),l=i!=null&&!e.deleted&&!n&&e.depth<5&&a("comments.create");return jsxRuntimeExports.jsxs("div",{style:{paddingLeft:`${e.depth*20}px`},onClick:()=>{n&&x(!o)},children:[jsxRuntimeExports.jsxs("div",{className:"group flex min-h-70 items-start gap-24 py-18",children:[jsxRuntimeExports.jsx(UserAvatar,{user:e.user,size:n?"lg":"xl",circle:!0}),jsxRuntimeExports.jsxs("div",{className:"flex-auto text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4 flex items-center gap-8",children:[e.user&&jsxRuntimeExports.jsx(UserDisplayName,{user:e.user}),jsxRuntimeExports.jsx("time",{className:"text-xs text-muted",children:jsxRuntimeExports.jsx(FormattedRelativeTime,{date:e.created_at})}),e.position?jsxRuntimeExports.jsx(Position,{commentable:s,position:e.position}):null]}),jsxRuntimeExports.jsx("div",{className:"whitespace-pre-line",children:e.deleted?jsxRuntimeExports.jsx("span",{className:"italic text-muted",children:jsxRuntimeExports.jsx(Trans,{message:"[COMMENT DELETED]"})}):e.content}),!e.deleted&&jsxRuntimeExports.jsxs("div",{className:"-ml-8 mt-10 flex items-center gap-8",children:[l&&jsxRuntimeExports.jsx(Button,{sizeClassName:"text-sm px-8 py-4",startIcon:jsxRuntimeExports.jsx(ReplyIcon,{}),onClick:()=>x(!o),children:jsxRuntimeExports.jsx(Trans,{message:"Reply"})}),jsxRuntimeExports.jsx(ThumbButtons,{model:e,showUpvotesOnly:!0}),jsxRuntimeExports.jsx(CommentOptionsTrigger,{comment:e,canDelete:t,user:i})]})]})]}),o?jsxRuntimeExports.jsx(NewCommentForm,{className:e!=null&&e.depth?void 0:"pl-20",commentable:s,inReplyTo:e,autoFocus:!0,onSuccess:()=>{x(!1)}}):null]})}const Position=reactExports.memo(({commentable:e,position:s})=>{if(!e.duration)return null;const t=s/100*(e.duration/1e3);return jsxRuntimeExports.jsx("span",{className:"text-xs text-muted",children:jsxRuntimeExports.jsx(Trans,{message:"at :position",values:{position:jsxRuntimeExports.jsx(FormattedDuration,{seconds:t})}})})});function CommentOptionsTrigger({comment:e,canDelete:s,user:t}){const n=useDeleteComments(),i=useSubmitReport(e),[a,o]=reactExports.useState(!1),x=(e.user_id===(t==null?void 0:t.id)||s)&&!e.deleted,l=()=>{i.mutate({})},c=u=>{o(!1),u&&n.mutate({commentIds:[e.id]},{onSuccess:()=>{queryClient.invalidateQueries({queryKey:["comment"]})}})};return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsxs(MenuTrigger,{children:[jsxRuntimeExports.jsx(Button,{startIcon:jsxRuntimeExports.jsx(MoreVertIcon,{}),sizeClassName:"text-sm px-8 py-4",children:jsxRuntimeExports.jsx(Trans,{message:"More"})}),jsxRuntimeExports.jsxs(Menu,{children:[jsxRuntimeExports.jsx(Item,{value:"report",onSelected:()=>l(),children:jsxRuntimeExports.jsx(Trans,{message:"Report comment"})}),x&&jsxRuntimeExports.jsx(Item,{value:"delete",onSelected:()=>o(!0),children:jsxRuntimeExports.jsx(Trans,{message:"Delete"})})]})]}),jsxRuntimeExports.jsx(DialogTrigger,{type:"modal",isOpen:a,onClose:u=>c(u),children:jsxRuntimeExports.jsx(ConfirmationDialog,{isDanger:!0,title:jsxRuntimeExports.jsx(Trans,{message:"Delete comment?"}),body:jsxRuntimeExports.jsx(Trans,{message:"Are you sure you want to delete this comment?"}),confirm:jsxRuntimeExports.jsx(Trans,{message:"Delete"})})})]})}function UserDisplayName({user:e}){const{auth:s}=reactExports.useContext(SiteConfigContext);return s.getUserProfileLink?jsxRuntimeExports.jsx(Link,{to:s.getUserProfileLink(e),className:"text-base font-medium hover:underline",children:e.display_name}):jsxRuntimeExports.jsx("div",{className:"text-base font-medium",children:e.display_name})}const accountRequiredMessage=message("Please <l>login</l> or <r>create account</r> to comment");function CommentList({className:e,commentable:s,canDeleteAllComments:t=!1,children:n,perPage:i=25}){const{items:a,totalItems:o,...x}=useComments(s,{perPage:i});return x.isError?null:jsxRuntimeExports.jsxs("div",{className:e,children:[jsxRuntimeExports.jsxs("div",{className:"mb-8 pb-8 border-b flex items-center gap-8",children:[jsxRuntimeExports.jsx(CommentIcon,{size:"sm",className:"text-muted"}),x.isInitialLoading?jsxRuntimeExports.jsx(Trans,{message:"Loading comments..."}):jsxRuntimeExports.jsx(Trans,{message:":count comments",values:{count:jsxRuntimeExports.jsx(FormattedNumber,{value:o||0})}})]}),n,jsxRuntimeExports.jsx(AccountRequiredCard,{message:accountRequiredMessage}),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:x.isInitialLoading?jsxRuntimeExports.jsx(CommentSkeletons,{count:4}):jsxRuntimeExports.jsx(CommentListItems,{comments:a,canDeleteAllComments:t,commentable:s})}),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:x,variant:"loadMore"})]})}function CommentListItems({comments:e,commentable:s,canDeleteAllComments:t}){return e.length?jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:e.map(n=>jsxRuntimeExports.jsx(CommentListItem$1,{comment:n,commentable:s,canDelete:t},n.id))},"comments"):jsxRuntimeExports.jsx(IllustratedMessage,{className:"mt-24",size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"Seems a little quiet over here"}),description:jsxRuntimeExports.jsx(Trans,{message:"Be the first to comment"})})}function CommentSkeletons({count:e}){return jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:[...new Array(e).keys()].map(s=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-24 py-18 min-h-70 group",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"avatar",radius:"rounded-full",size:"w-60 h-60"}),jsxRuntimeExports.jsxs("div",{className:"text-sm flex-auto",children:[jsxRuntimeExports.jsx(Skeleton,{className:"text-base max-w-184 mb-4"}),jsxRuntimeExports.jsx(Skeleton,{className:"text-sm"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-8 mt-10",children:[jsxRuntimeExports.jsx(Skeleton,{className:"text-sm max-w-70"}),jsxRuntimeExports.jsx(Skeleton,{className:"text-sm max-w-40"}),jsxRuntimeExports.jsx(Skeleton,{className:"text-sm max-w-60"})]})]})]},s))},"loading-skeleton")}function WatchPageTitleDetails(){var n;const{data:e}=useWatchPageVideo(),s=useIsStreamingMode(),t=e?jsxRuntimeExports.jsx(Layout,{poster:jsxRuntimeExports.jsx(TitlePoster,{size:"w-132",srcSize:"md",title:e.title,showPlayButton:!0,className:"max-md:hidden"}),titleLink:jsxRuntimeExports.jsx(TitleLink,{title:e.title}),videoName:s?void 0:e.video.name,episodeName:e.episode?jsxRuntimeExports.jsxs(EpisodeLink,{title:e.title,episode:e.episode,children:[e.episode.name," (",jsxRuntimeExports.jsx(CompactSeasonEpisode,{episode:e.episode}),")"]}):void 0,description:((n=e.episode)==null?void 0:n.description)||e.title.description,rate:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(ThumbButtons,{model:e.video,className:"mr-auto"}),jsxRuntimeExports.jsx(ReportButton,{video:e.video}),jsxRuntimeExports.jsx(ShareButton$1,{video:e.video})]})},"loaded"):jsxRuntimeExports.jsx(Layout,{poster:jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"w-132 aspect-poster"}),titleLink:jsxRuntimeExports.jsx(Skeleton,{className:"max-w-144"}),videoName:jsxRuntimeExports.jsx(Skeleton,{className:"max-w-240"}),description:jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Skeleton,{}),jsxRuntimeExports.jsx(Skeleton,{})]}),rate:jsxRuntimeExports.jsxs("div",{className:"flex h-32 items-center gap-2",children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"w-56 h-24",className:"mr-10"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"w-56 h-24"})]})},"skeleton");return jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:t})}function ShareButton$1({video:e}){const s=getWatchLink(e,{absolute:!0});return jsxRuntimeExports.jsx(ShareMenuTrigger,{link:s,children:jsxRuntimeExports.jsx(Tooltip,{label:jsxRuntimeExports.jsx(Trans,{message:"Share"}),children:jsxRuntimeExports.jsx(IconButton,{children:jsxRuntimeExports.jsx(ShareIcon,{})})})})}function ReportButton({video:e}){const s=useSubmitReport(e),t=useDeleteReport(e),[n,i]=reactExports.useState(e.current_user_reported);return jsxRuntimeExports.jsx(Tooltip,{label:jsxRuntimeExports.jsx(Trans,{message:"Report"}),children:jsxRuntimeExports.jsx(IconButton,{onClick:()=>{n?t.mutate():s.mutate({}),i(!n)},children:jsxRuntimeExports.jsx(FlagIcon,{})})})}function Layout({poster:e,titleLink:s,videoName:t,episodeName:n,description:i,rate:a}){return jsxRuntimeExports.jsxs(m.div,{className:"flex items-start gap-16 overflow-hidden rounded pr-6",...opacityAnimation,children:[e,jsxRuntimeExports.jsxs("div",{className:"flex-auto py-6",children:[jsxRuntimeExports.jsx("h1",{className:"mb-6 text-2xl font-medium",children:s}),n&&jsxRuntimeExports.jsx("div",{className:"text-base font-medium",children:n}),t&&jsxRuntimeExports.jsx("div",{className:"text-base font-medium",children:t}),jsxRuntimeExports.jsx("div",{className:"my-12",children:a}),i&&jsxRuntimeExports.jsx("p",{className:"max-w-780 text-sm text-muted",children:i})]})]})}function WatchPageAside(){const{data:e}=useWatchPageVideo(),s=e?jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:e.related_videos.map(t=>jsxRuntimeExports.jsx(RelatedVideo,{video:t,activeVideo:e.video},t.id))},"loaded"):jsxRuntimeExports.jsxs(m.div,{...opacityAnimation,children:[jsxRuntimeExports.jsx(VideoGridItemSkeleton,{className:"mb-34"}),jsxRuntimeExports.jsx(VideoGridItemSkeleton,{className:"mb-34"}),jsxRuntimeExports.jsx(VideoGridItemSkeleton,{className:"mb-34"})]},"skeleton");return jsxRuntimeExports.jsxs("aside",{className:"w-350 flex-shrink-0 max-lg:mt-54",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontWeight:"font-medium",fontSize:"text-2xl",margin:"mb-28",children:jsxRuntimeExports.jsx(Header,{video:e==null?void 0:e.video})}),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:s})]})}function Header({video:e}){const s=useIsStreamingMode();return e?s?jsxRuntimeExports.jsx(Trans,{message:"Related movies & series"}):jsxRuntimeExports.jsx(Trans,{message:"Related videos"}):jsxRuntimeExports.jsx("div",{className:"h-32"})}function RelatedVideo({video:e,activeVideo:s}){const t=useIsStreamingMode();let n=e.name;return t&&(e.episode?n=jsxRuntimeExports.jsxs("span",{children:[e.episode.name," (",jsxRuntimeExports.jsx(CompactSeasonEpisode,{episode:e.episode}),")"]}):n=e.title.name),jsxRuntimeExports.jsx(VideoGridItem,{video:e,title:e.title,episode:e.episode,forceTitleBackdrop:t,className:clsx("mb-24 text-sm",s.id===e.id&&"text-primary"),showCategory:!t,name:n})}const className="flex items-center flex-wrap gap-14";function WatchPageAlternativeVideos({data:e}){const s=useNavigate(),{streaming:t}=useSettings(),n=e==null?void 0:e.title,i=e==null?void 0:e.episode,a=e==null?void 0:e.video,o=n&&i&&a&&(a.type==="embed"||a.type==="external");return!o&&!t.show_video_selector?null:jsxRuntimeExports.jsxs("div",{className:"mt-14 flex items-start justify-between gap-48",children:[t.show_video_selector&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(VideoDropdown,{className:"lg:hidden",videos:(e==null?void 0:e.alternative_videos)||[]}),jsxRuntimeExports.jsx("div",{className:"max-lg:hidden",children:jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:e?jsxRuntimeExports.jsx(VideoList,{videos:e.alternative_videos}):jsxRuntimeExports.jsx(Skeletons,{})})})]}),o&&jsxRuntimeExports.jsx(EpisodeSelector,{title:n,currentEpisode:i,onSelected:x=>{s(getWatchLink(x.primary_video))},trigger:jsxRuntimeExports.jsx(Button,{variant:"outline",className:"min-h-40",startIcon:jsxRuntimeExports.jsx(MediaEpisodesIcon,{}),children:jsxRuntimeExports.jsx(Trans,{message:"Episodes"})})})]})}function VideoDropdown({videos:e,className:s}){const t=useNavigate();return jsxRuntimeExports.jsxs(MenuTrigger,{children:[jsxRuntimeExports.jsx(Button,{variant:"outline",className:clsx("min-h-40",s),startIcon:jsxRuntimeExports.jsx(MediaPlayIcon,{}),children:jsxRuntimeExports.jsx(Trans,{message:"Other sources"})}),jsxRuntimeExports.jsx(Menu,{children:e.map(n=>jsxRuntimeExports.jsx(Item,{value:n.id,startIcon:jsxRuntimeExports.jsx(MediaPlayIcon,{}),endSection:jsxRuntimeExports.jsx(QualityBadge,{video:n}),onSelected:()=>t(getWatchLink(n)),children:n.name},n.id))})]})}function VideoList({videos:e}){const{videoId:s}=useParams();return e.length<2?null:jsxRuntimeExports.jsx(m.div,{className,...opacityAnimation,children:e.map(t=>jsxRuntimeExports.jsxs(Button,{elementType:Link,to:getWatchLink(t),variant:"outline",color:s===`${t.id}`?"primary":"chip",startIcon:jsxRuntimeExports.jsx(MediaPlayIcon,{"aria-hidden":!0}),className:"min-h-40 gap-10",children:[t.name,jsxRuntimeExports.jsx(QualityBadge,{video:t})]},t.id))},"alternative-sources")}function QualityBadge({video:e}){return!e.quality||e.quality==="default"?null:jsxRuntimeExports.jsx("span",{className:"rounded border px-6 text-xs font-bold uppercase",children:e.quality})}function Skeletons(){return jsxRuntimeExports.jsxs(m.div,{className:clsx(className,"h-40"),...opacityAnimation,children:[jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"h-full w-[116px]"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"h-full w-[116px]"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"h-full w-[116px]"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"h-full w-[116px]"}),jsxRuntimeExports.jsx(Skeleton,{variant:"rect",size:"h-full w-[116px]"})]},"skeletons")}function WatchPage(){const e=useDarkThemeVariables();return useScrollToTop(),jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(MainNavbar,{}),jsxRuntimeExports.jsx("div",{style:e,className:"dark min-h-screen bg text",children:jsxRuntimeExports.jsxs("div",{className:"container mx-auto p-14 md:p-24",children:[jsxRuntimeExports.jsx(Content,{}),jsxRuntimeExports.jsx(Footer,{className:"mt-48"})]})})]})}function Content(){const{titles:e,comments:s}=useSettings(),{isLoggedIn:t,hasPermission:n}=useAuth(),i=useWatchPageVideo(),{data:a,isLoading:o}=i,x=a==null?void 0:a.title,l=a==null?void 0:a.episode,c=a==null?void 0:a.video;let u=c;s!=null&&s.per_video||(u=l||x);const d=x&&c&&e.enable_comments&&n("comments.view");return a||o?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:i}),jsxRuntimeExports.jsx(VideoWrapper,{data:a}),jsxRuntimeExports.jsx(WatchPageAlternativeVideos,{data:a}),jsxRuntimeExports.jsx(AdHost,{slot:"watch_top",className:"pt-48"}),jsxRuntimeExports.jsxs("section",{className:"mt-42 items-start gap-56 lg:flex",children:[jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx(WatchPageTitleDetails,{}),d&&jsxRuntimeExports.jsx(CommentList,{commentable:u,className:"mt-44",perPage:20,children:t&&n("comments.create")&&jsxRuntimeExports.jsx(NewCommentForm,{commentable:u,className:"mb-14 mt-24"})})]}),jsxRuntimeExports.jsx(WatchPageAside,{})]})]},(c==null?void 0:c.id)||"loading"):jsxRuntimeExports.jsx(PageErrorMessage,{})}function VideoWrapper({data:e}){const s=useIsStreamingMode(),{hasPermission:t}=useAuth(),[n,i]=reactExports.useState(!1);return $f0a04ccd8dbdd83b$export$e5c5a5f917a5871c(()=>{i(!0)},[]),jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,mode:"wait",children:e!=null&&e.video&&n?jsxRuntimeExports.jsx(m.div,{...opacityAnimation,children:t("videos.play")?jsxRuntimeExports.jsx(SiteVideoPlayer,{title:e.title,episode:e.episode,video:e.video,relatedVideos:e.related_videos,autoPlay:!0,logPlays:!0,showEpisodeSelector:s}):jsxRuntimeExports.jsx(UpgradeMessage,{video:e.video})},"player"):jsxRuntimeExports.jsx(m.div,{className:"relative",...opacityAnimation,children:jsxRuntimeExports.jsx(VideoPlayerSkeleton,{animate:!0})},"skeleton")})}function UpgradeMessage({video:e}){return jsxRuntimeExports.jsxs("div",{className:"relative flex aspect-video items-center justify-center bg-alt",children:[jsxRuntimeExports.jsx("div",{className:"blur",children:jsxRuntimeExports.jsx(VideoThumbnail,{video:e})}),jsxRuntimeExports.jsxs("div",{className:"absolute h-max w-max rounded-lg bg-black/60 p-24 text-lg font-medium",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Trans,{message:"Your current plan does not allow watching videos. Upgrade to unlock this feature."})}),jsxRuntimeExports.jsx("div",{className:"mt-14 text-center",children:jsxRuntimeExports.jsx(Button,{variant:"flat",color:"primary",elementType:Link,to:"/pricing",children:jsxRuntimeExports.jsx(Trans,{message:"Upgrade"})})})]})]})}function TitleVideosPage(){const e=useTitle("titlePage"),s=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$8,{title:e.data.title}),";"]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:s})}function PageContent$8({title:e}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:e}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:[jsxRuntimeExports.jsx(TitlePageHeader,{title:e,showPoster:!0}),jsxRuntimeExports.jsx(VideoGrid,{videos:e.videos,title:e,count:24,heading:jsxRuntimeExports.jsx(SiteSectionHeading,{children:jsxRuntimeExports.jsx(Trans,{message:"Video gallery"})})})]})]})}function TitleImagesPage(){const e=useTitle("titlePage"),s=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$7,{title:e.data.title}),";"]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:s})}function PageContent$7({title:e}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:e}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:[jsxRuntimeExports.jsx(TitlePageHeader,{title:e,showPoster:!0}),jsxRuntimeExports.jsx(TitlePageImageGrid,{images:e.images,srcSize:"lg",count:24,heading:jsxRuntimeExports.jsx(SiteSectionHeading,{children:jsxRuntimeExports.jsx(Trans,{message:"Image gallery"})})})]})]})}function PersonPageAside({data:{person:e,total_credits_count:s}}){const{hasPermission:t}=useAuth(),n=jsxRuntimeExports.jsx(Trans,{message:":count years old",values:{count:jsxRuntimeExports.jsx(PersonAge,{person:e})}});return jsxRuntimeExports.jsx(TitlePageAsideLayout,{className:"max-md:flex",poster:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(PersonPoster,{person:e,size:"w-140 md:w-full",srcSize:"lg"}),t("titles.update")&&jsxRuntimeExports.jsx(IconButton,{elementType:Link,to:`/admin/people/${e.id}/edit`,className:"absolute bottom-6 right-4",color:"white",children:jsxRuntimeExports.jsx(EditIcon,{})})]}),jsxRuntimeExports.jsx(ShareButton,{person:e})]}),children:jsxRuntimeExports.jsxs("dl",{className:"mt-12 md:mt-24",children:[e.known_for&&jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Known for"}),children:jsxRuntimeExports.jsx(Trans,{message:e.known_for})}),e.gender&&jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Gender"}),children:jsxRuntimeExports.jsx("span",{className:"capitalize",children:jsxRuntimeExports.jsx(Trans,{message:e.gender})})}),s?jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Known credits"}),children:s}):null,e.birth_date?jsxRuntimeExports.jsxs(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Born"}),children:[jsxRuntimeExports.jsx(FormattedDate,{date:e.birth_date})," ",!e.death_date&&n]}):null,e.birth_place?jsxRuntimeExports.jsx(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Birthplace"}),children:e.birth_place}):null,e.death_date?jsxRuntimeExports.jsxs(DetailItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Died"}),children:[jsxRuntimeExports.jsx(FormattedDate,{date:e.death_date})," (",n,")"]}):null]})})}function ShareButton({person:e}){const s=getPersonLink(e,{absolute:!0});return jsxRuntimeExports.jsx(ShareMenuTrigger,{link:s,children:jsxRuntimeExports.jsx(Button,{variant:"outline",color:"primary",startIcon:jsxRuntimeExports.jsx(ShareIcon,{}),className:"mt-14 md:min-h-40 md:w-full",children:jsxRuntimeExports.jsx(Trans,{message:"Share"})})})}function useFullPersonCreditsForTitle({person:e,credit:s,department:t},n){return useQuery({queryKey:["people",`${e.id}`,"full-credits",`${s.id}`,`${t}`],queryFn:()=>fetchCredits(e.id,s.id,t),enabled:n.enabled})}function fetchCredits(e,s,t){return apiClient.get(`people/${e}/full-credits/${s}/${t}`).then(n=>n.data)}function CharacterOrJob({credit:e,className:s}){var t,n,i;return jsxRuntimeExports.jsx("div",{className:s,children:((t=e.pivot)==null?void 0:t.department)==="actors"?((n=e.pivot)==null?void 0:n.character)??jsxRuntimeExports.jsx(Trans,{message:"Unknown"}):jsxRuntimeExports.jsx("span",{className:"capitalize",children:((i=e.pivot)==null?void 0:i.job)??jsxRuntimeExports.jsx(Trans,{message:"Unknown"})})})}function PersonPageCredits({data:{credits:e,person:s}}){return jsxRuntimeExports.jsxs("div",{className:"mt-34",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontSize:"text-xl",children:jsxRuntimeExports.jsx(Trans,{message:"Credits"})}),jsxRuntimeExports.jsx(Accordion,{mode:"multiple",defaultExpandedValues:[0],isLazy:!0,children:Object.entries(e).map(([t,n])=>jsxRuntimeExports.jsx(AccordionItem,{labelClassName:"font-semibold text-base",description:jsxRuntimeExports.jsx(Trans,{message:"(:count credits)",values:{count:n.length}}),label:jsxRuntimeExports.jsx("span",{className:"capitalize",children:jsxRuntimeExports.jsx(Trans,{message:t==="actors"?"Acting":t})}),children:n.map((i,a)=>{var x;const o=i===n[n.length-1];return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start py-6",children:[jsxRuntimeExports.jsx(TitlePoster,{title:i,size:"w-40",className:"mr-12",lazy:!0,srcSize:"sm"}),jsxRuntimeExports.jsxs("div",{className:"mr-24 pt-2",children:[jsxRuntimeExports.jsx("div",{className:"font-semibold text-base",children:jsxRuntimeExports.jsx(TitleLink,{title:i})}),jsxRuntimeExports.jsx(CharacterOrJob,{className:"text-sm text-muted",credit:i}),i.credited_episode_count?jsxRuntimeExports.jsx(EpisodeList,{credit:i,department:t,person:s}):null]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-muted ml-auto",children:i.year})]}),!o&&i.year!==((x=n[a+1])==null?void 0:x.year)&&jsxRuntimeExports.jsx("div",{className:"h-1 w-full bg-divider my-8"})]},i.id)})},t))})]})}function EpisodeList({credit:e,department:s,person:t}){var u;const[n,i]=reactExports.useState(!1),a=useFullPersonCreditsForTitle({person:t,department:s,credit:e},{enabled:n}),o=e.episodes.length===e.credited_episode_count||a.data!=null,x=a.isLoading&&a.fetchStatus!=="idle",l=x||!o,c=(u=a.data)!=null&&u.credits.length?a.data.credits:e.episodes;return jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx("div",{children:c.map(d=>jsxRuntimeExports.jsx("div",{className:"text-xs pl-10 mb-4",children:jsxRuntimeExports.jsxs(BulletSeparatedItems,{children:[jsxRuntimeExports.jsxs("span",{children:["-"," ",jsxRuntimeExports.jsx(EpisodeLink,{title:e,episode:d,seasonNumber:d.season_number})," ","(",d.year,")"]}),jsxRuntimeExports.jsx(CompactSeasonEpisode,{episode:d}),jsxRuntimeExports.jsx(CharacterOrJob,{credit:d})]})},d.id))}),l&&jsxRuntimeExports.jsx("div",{className:"mt-8",children:jsxRuntimeExports.jsx(Button,{size:"xs",disabled:x,onClick:()=>{i(!0)},children:jsxRuntimeExports.jsx(Trans,{message:"Show all :count episodes",values:{count:e.credited_episode_count}})})})]})}function PersonPage(){const e=usePerson("personPage"),s=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$6,{data:e.data})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:s})}function PageContent$6({data:e}){const{person:s,knownFor:t}=e;return jsxRuntimeExports.jsx(reactExports.Fragment,{children:jsxRuntimeExports.jsx("div",{className:"container mx-auto mt-14 px-14 md:mt-40 md:px-24",children:jsxRuntimeExports.jsxs("div",{className:"items-start gap-54 md:flex",children:[jsxRuntimeExports.jsx(PersonPageAside,{data:e}),jsxRuntimeExports.jsxs("main",{className:"flex-auto @container max-md:mt-34",children:[jsxRuntimeExports.jsx(TitlePageHeaderLayout,{name:s.name}),jsxRuntimeExports.jsx(Biography,{person:s}),jsxRuntimeExports.jsx(AdHost,{slot:"person_top",className:"pt-48"}),jsxRuntimeExports.jsx(KnowForList,{items:t}),jsxRuntimeExports.jsx(PersonPageCredits,{data:e})]})]})})})}function Biography({person:e}){return e.description?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontSize:"text-xl",children:jsxRuntimeExports.jsx(Trans,{message:"Biography"})}),jsxRuntimeExports.jsx(TruncatedDescription,{className:"text-sm",description:e.description})]}):null}function KnowForList({items:e}){return e!=null&&e.length?jsxRuntimeExports.jsxs("div",{className:"mt-34",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontSize:"text-xl",children:jsxRuntimeExports.jsx(Trans,{message:"Known for"})}),jsxRuntimeExports.jsx(ContentGridLayout,{variant:"portrait",children:e.slice(0,4).map(s=>jsxRuntimeExports.jsx(TitlePortraitGridItem,{item:s,description:jsxRuntimeExports.jsx(CharacterOrJob,{className:"text-muted",credit:s})},s.id))})]}):null}function TitleFullCreditsPage(){const e=useTitle("titleCreditsPage"),s=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$5,{data:e.data})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:s})}function PageContent$5({data:{title:e,credits:s={}}}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:e}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:[jsxRuntimeExports.jsx(TitlePageHeader,{title:e,showPoster:!0}),jsxRuntimeExports.jsxs("div",{className:"mt-48 @container",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{headingType:"h2",className:"mb-40",children:jsxRuntimeExports.jsx(Trans,{message:"Full cast and crew"})}),Object.entries(s).map(([t,n])=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"mb-16 text-2xl font-bold capitalize",children:jsxRuntimeExports.jsx(Trans,{message:t})}),jsxRuntimeExports.jsx(TitleCreditsGrid,{credits:n,className:"mb-68"})]},t))]})]})]})}function EpisodeFullCreditsPage(){const e=useEpisode("episodeCreditsPage"),s=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$4,{data:e.data})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:s})}function PageContent$4({data:{title:e,episode:s,credits:t}}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(TitlePageHeaderImage,{title:e,episode:s}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:[jsxRuntimeExports.jsx(EpisodePageHeader,{title:e,episode:s,showPoster:!0}),jsxRuntimeExports.jsxs("div",{className:"mt-48 @container",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{headingType:"h2",className:"mb-40",children:jsxRuntimeExports.jsx(Trans,{message:"Full cast and crew"})}),t&&Object.entries(t).map(([n,i])=>jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"mb-16 text-2xl font-bold capitalize",children:jsxRuntimeExports.jsx(Trans,{message:n})}),jsxRuntimeExports.jsx(TitleCreditsGrid,{credits:i,className:"mb-68"})]},n))]})]})]})}function NewsArticlePage(){const e=useNewsArticle("newsArticlePage"),s=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$3,{data:e.data})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:s})}function PageContent$3({data:{article:e,related:s}}){return jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-14 items-start gap-40 px-14 md:mt-40 md:px-24 lg:flex",children:[jsxRuntimeExports.jsx("main",{className:"mb-24 rounded border p-16",children:jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx("h1",{className:"mb-24 text-3xl md:text-4xl",children:e.title}),jsxRuntimeExports.jsxs("div",{className:"items-start gap-16 md:flex",children:[jsxRuntimeExports.jsx(NewsArticleImage,{article:e,size:"w-184 h-184",className:"max-md:mb-24"}),jsxRuntimeExports.jsx("div",{className:"prose text dark:prose-invert",dangerouslySetInnerHTML:{__html:e.body}})]}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"mt-24 text-sm text-muted",children:[jsxRuntimeExports.jsx(FormattedDate,{date:e.created_at}),e.byline?jsxRuntimeExports.jsx(NewsArticleByline,{article:e}):null,e.source?jsxRuntimeExports.jsx(NewsArticleSourceLink,{article:e}):null]})]})}),jsxRuntimeExports.jsx(OtherNews,{articles:s})]})}function OtherNews({articles:e}){return jsxRuntimeExports.jsxs("div",{className:"w-full max-w-full flex-shrink-0 lg:w-400",children:[jsxRuntimeExports.jsx("h2",{className:"mb-14 text-2xl",children:jsxRuntimeExports.jsx(Trans,{message:"Other news"})}),e.map(s=>jsxRuntimeExports.jsxs("div",{className:"mb-14 flex items-center gap-14 rounded border pr-14",children:[jsxRuntimeExports.jsx(NewsArticleImage,{article:s,size:"w-80 h-80",lazy:!1}),jsxRuntimeExports.jsxs("div",{className:"min-w-0",children:[jsxRuntimeExports.jsx("h3",{className:"line-clamp-2 text-sm font-semibold",children:jsxRuntimeExports.jsx(NewsArticleLink,{article:s})}),jsxRuntimeExports.jsxs(BulletSeparatedItems,{className:"mt-6 text-sm text-muted",children:[jsxRuntimeExports.jsx(FormattedDate,{date:s.created_at}),jsxRuntimeExports.jsx(NewsArticleByline,{article:s})]})]})]},s.id))]})}function useDeleteList(){const{trans:e}=useTrans();return useMutation({mutationFn:s=>deleteList(s),onSuccess:async()=>{await queryClient.invalidateQueries({queryKey:["channel"]}),toast(e(message("List deleted")))},onError:s=>showHttpErrorToast(s)})}function deleteList(e){return apiClient.delete(`channel/${e.listId}`).then(s=>s.data)}function UserListIndexItem({list:e,user:s,showVisibility:t=!0}){const{user:n}=useAuth(),i=n&&n.id===s.id;return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-24 border-b py-24",children:[jsxRuntimeExports.jsx(ItemsPreview,{className:"max-md:hidden",list:e}),jsxRuntimeExports.jsxs("section",{className:"flex-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-8",children:[jsxRuntimeExports.jsx(UserListLink,{list:e,className:"mr-auto block text-lg font-semibold capitalize"}),!e.config.preventDeletion&&!e.internal&&i&&jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{elementType:Link,to:`${getUserListLink(e)}/edit`,variant:"outline",size:"2xs",color:"primary",children:jsxRuntimeExports.jsx(Trans,{message:"Edit"})}),jsxRuntimeExports.jsxs(DialogTrigger,{type:"modal",children:[jsxRuntimeExports.jsx(Button,{color:"danger",variant:"outline",radius:"rounded",size:"2xs",children:jsxRuntimeExports.jsx(Trans,{message:"Delete"})}),jsxRuntimeExports.jsx(DeleteListDialog,{list:e})]})]})]}),e.description&&jsxRuntimeExports.jsx("p",{className:"mt-8 whitespace-nowrap text-sm text-muted",children:e.description}),jsxRuntimeExports.jsx("div",{className:"mt-12 text-sm",children:jsxRuntimeExports.jsxs("div",{className:"items-center justify-between gap-24 md:flex",children:[s&&jsxRuntimeExports.jsx(UserListByline,{user:s}),jsxRuntimeExports.jsx(UserListDetails,{list:e,showVisibility:t,className:"max-md:mt-12"})]})})]})]})}function ItemsPreview({list:e,className:s}){var t,n;return(t=e.items)!=null&&t.length?jsxRuntimeExports.jsx("div",{className:clsx("flex items-center overflow-hidden rounded",s),children:(n=e.items)==null?void 0:n.map((i,a)=>jsxRuntimeExports.jsxs("div",{style:{zIndex:100-a},className:clsx("relative overflow-hidden rounded shadow-[2px_0_7px_#000]",a!==0&&"-ml-30"),children:[i.model_type==="title"?jsxRuntimeExports.jsx(TitlePoster,{title:i,size:"w-70",srcSize:"sm"}):jsxRuntimeExports.jsx(PersonPoster,{person:i,size:"w-70",srcSize:"sm"}),jsxRuntimeExports.jsx("div",{className:"pointer-events-none absolute inset-0 shadow-[inset_0_0_0_1px_rgba(221,238,255,.35)]"})]},i.id))}):null}function DeleteListDialog({list:e}){const s=useDeleteList(),{close:t}=useDialogContext();return jsxRuntimeExports.jsx(ConfirmationDialog,{isDanger:!0,title:jsxRuntimeExports.jsx(Trans,{message:"Delete list"}),body:jsxRuntimeExports.jsx(Trans,{message:"Are you sure you want to delete this list?"}),confirm:jsxRuntimeExports.jsx(Trans,{message:"Delete"}),isLoading:s.isPending,onConfirm:()=>s.mutate({listId:e.id},{onSuccess:t})})}function useProfileLists(){const{userId:e="me"}=useParams();return useInfiniteData({endpoint:`user-profile/${e}/lists`,queryKey:["channel","profile-lists",e],paginate:"simple"})}function UserListsIndexPage(){const e=useProfileLists(),s=e.data?jsxRuntimeExports.jsx(PageContent$2,{query:e}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsxs(SitePageLayout,{children:[jsxRuntimeExports.jsx(StaticPageTitle,{children:jsxRuntimeExports.jsx(Trans,{message:"Your lists"})}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-48 px-24",children:[jsxRuntimeExports.jsx("header",{children:jsxRuntimeExports.jsx(SiteSectionHeading,{headingType:"h1",margin:"mb-34",actions:jsxRuntimeExports.jsx(Button,{variant:"flat",color:"primary",elementType:Link,to:"new",children:jsxRuntimeExports.jsx(Trans,{message:"New list"})}),children:jsxRuntimeExports.jsx(Trans,{message:"My lists"})})}),s]})]})}function PageContent$2({query:e}){const{user:s}=useAuth();return e.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{className:"mt-80",image:jsxRuntimeExports.jsx(SvgImage,{src:todoImage}),title:jsxRuntimeExports.jsx(Trans,{message:"You have not created any lists yet."})}):jsxRuntimeExports.jsxs("div",{children:[e.items.map(t=>jsxRuntimeExports.jsx(UserListIndexItem,{list:t,user:s},t.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:e})]})}const userProfileQueryKey=e=>["users",`${e}`,"profile"];function useUserProfile(){const{userId:e}=useParams();return useQuery({queryKey:userProfileQueryKey(e),queryFn:()=>fetchProfile(e)})}function fetchProfile(e){return apiClient.get(`user-profile/${e}`).then(s=>s.data)}function ProfileDescription({profile:e,className:s}){return e?jsxRuntimeExports.jsxs("div",{className:clsx("text-sm",s),children:[e.description&&jsxRuntimeExports.jsx("p",{className:"rounded text-secondary whitespace-nowrap overflow-hidden overflow-ellipsis",children:e.description}),e.city||e.country?jsxRuntimeExports.jsx("div",{className:"flex items-center gap-24 justify-between mt-4",children:(e.city||e.country)&&jsxRuntimeExports.jsxs("div",{className:"rounded text-secondary w-max",children:[e.city,e.city&&","," ",e.country]})}):null]}):null}function useFollowedUsers(){const{user:e}=useAuth();return useQuery({queryKey:["users","followed","ids"],queryFn:()=>fetchIds(),enabled:!!e})}function useIsUserFollowing(e){const{data:s,isLoading:t}=useFollowedUsers();return{isLoading:t,isFollowing:!!(s!=null&&s.ids.includes(e.id))}}function fetchIds(){return apiClient.get("users/me/followed-users/ids").then(e=>e.data)}function useFollowUser(){return useMutation({mutationFn:e=>followUser(e),onSuccess:async(e,{user:s})=>{await queryClient.invalidateQueries({queryKey:["users"]}),toast(message("Following :name",{values:{name:s.display_name}}))},onError:e=>showHttpErrorToast(e)})}function followUser({user:e}){return apiClient.post(`users/${e.id}/follow`).then(s=>s.data)}function useUnfollowUser(){return useMutation({mutationFn:e=>unfollowUser(e),onSuccess:async(e,{user:s})=>{await queryClient.invalidateQueries({queryKey:["users"]}),toast(message("Stopped following :name",{values:{name:s.display_name}}))},onError:e=>showHttpErrorToast(e)})}function unfollowUser({user:e}){return apiClient.post(`users/${e.id}/unfollow`).then(s=>s.data)}function FollowButton({user:e,className:s,...t}){const{user:n}=useAuth(),{isFollowing:i,isLoading:a}=useIsUserFollowing(e),o=useFollowUser(),x=useUnfollowUser(),l=clsx(s,"min-w-82");return i?jsxRuntimeExports.jsx(Button,{...t,className:l,onClick:()=>x.mutate({user:e}),disabled:!n||(n==null?void 0:n.id)===e.id||x.isPending||a,children:jsxRuntimeExports.jsx(Trans,{message:"Unfollow"})}):jsxRuntimeExports.jsx(Button,{...t,className:l,onClick:()=>o.mutate({user:e}),disabled:!n||(n==null?void 0:n.id)===e.id||o.isPending||a,children:jsxRuntimeExports.jsx(Trans,{message:"Follow"})})}function ProfileLinksForm(){const{fields:e,append:s,remove:t}=useFieldArray({name:"links"});return jsxRuntimeExports.jsxs("div",{children:[e.map((n,i)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-10 mb-10 items-end",children:[jsxRuntimeExports.jsx(FormTextField,{required:!0,type:"url",label:jsxRuntimeExports.jsx(Trans,{message:"URL"}),name:`links.${i}.url`,size:"sm",className:"flex-auto"}),jsxRuntimeExports.jsx(FormTextField,{required:!0,label:jsxRuntimeExports.jsx(Trans,{message:"Short title"}),name:`links.${i}.title`,size:"sm",className:"flex-auto"}),jsxRuntimeExports.jsx(IconButton,{size:"sm",color:"primary",className:"flex-shrink-0",onClick:()=>{t(i)},children:jsxRuntimeExports.jsx(CloseIcon,{})})]},n.id)),jsxRuntimeExports.jsx(Button,{variant:"text",color:"primary",startIcon:jsxRuntimeExports.jsx(AddIcon,{}),size:"xs",onClick:()=>{s({url:"",title:""})},children:jsxRuntimeExports.jsx(Trans,{message:"Add another link"})})]})}function useUpdateUserProfile(e){const{user:s}=useAuth(),{trans:t}=useTrans();return useMutation({mutationFn:n=>updateProfile(n),onSuccess:async()=>{s&&await queryClient.invalidateQueries({queryKey:userProfileQueryKey(s.id)}),toast(t(message("Profile updated")))},onError:n=>onFormQueryError(n,e)})}function updateProfile(e){return apiClient.put("user-profile/me",e).then(s=>s.data)}function EditUserProfileDialog({user:e}){var o,x,l,c;const{close:s,formId:t}=useDialogContext(),{data:n}=useValueLists(["countries"]),i=useForm({defaultValues:{user:{username:e.username,avatar:e.avatar,first_name:e.first_name,last_name:e.last_name},profile:{city:(o=e.profile)==null?void 0:o.city,country:(x=e.profile)==null?void 0:x.country,description:(l=e.profile)==null?void 0:l.description},links:e.links}}),a=useUpdateUserProfile(i);return jsxRuntimeExports.jsxs(Dialog,{size:"xl",children:[jsxRuntimeExports.jsx(DialogHeader,{children:jsxRuntimeExports.jsx(Trans,{message:"Edit your profile"})}),jsxRuntimeExports.jsx(DialogBody,{children:jsxRuntimeExports.jsx(Form,{id:t,form:i,onSubmit:u=>a.mutate(u,{onSuccess:()=>s()}),children:jsxRuntimeExports.jsxs(FileUploadProvider,{children:[jsxRuntimeExports.jsxs("div",{className:"md:flex items-start gap-30",children:[jsxRuntimeExports.jsx(FormImageSelector,{label:jsxRuntimeExports.jsx(Trans,{message:"Avatar"}),name:"user.avatar",diskPrefix:"avatars",variant:"avatar",previewSize:"w-200 h-200",className:"max-md:mb-20"}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsx(FormTextField,{name:"user.username",label:jsxRuntimeExports.jsx(Trans,{message:"Username"}),className:"mb-24"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-24",children:[jsxRuntimeExports.jsx(FormTextField,{name:"user.first_name",label:jsxRuntimeExports.jsx(Trans,{message:"First name"}),className:"flex-1 mb-24"}),jsxRuntimeExports.jsx(FormTextField,{name:"user.last_name",label:jsxRuntimeExports.jsx(Trans,{message:"Last name"}),className:"flex-1 mb-24"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-24",children:[jsxRuntimeExports.jsx(FormTextField,{name:"profile.city",label:jsxRuntimeExports.jsx(Trans,{message:"City"}),className:"flex-1 mb-24"}),jsxRuntimeExports.jsxs(FormSelect,{showSearchField:!0,className:"flex-1 mb-24",selectionMode:"single",name:"profile.country",label:jsxRuntimeExports.jsx(Trans,{message:"Country"}),children:[jsxRuntimeExports.jsx(Item,{value:void 0,children:jsxRuntimeExports.jsx(Trans,{message:"None"})},"none"),(c=n==null?void 0:n.countries)==null?void 0:c.map(u=>jsxRuntimeExports.jsx(Item,{value:u.name,children:u.name},u.code))]})]}),jsxRuntimeExports.jsx(FormTextField,{name:"profile.description",label:jsxRuntimeExports.jsx(Trans,{message:"Description"}),inputElementType:"textarea",rows:4})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-24",children:[jsxRuntimeExports.jsx("div",{className:"mb-16 pb-16 border-b",children:jsxRuntimeExports.jsx(Trans,{message:"Your links"})}),jsxRuntimeExports.jsx(ProfileLinksForm,{})]})]})})}),jsxRuntimeExports.jsxs(DialogFooter,{children:[jsxRuntimeExports.jsx(Button,{type:"button",onClick:()=>{s()},children:jsxRuntimeExports.jsx(Trans,{message:"Cancel"})}),jsxRuntimeExports.jsx(Button,{form:t,type:"submit",variant:"flat",color:"primary",disabled:a.isPending,children:jsxRuntimeExports.jsx(Trans,{message:"Save"})})]})]})}function ProfileStatsList({user:e}){const{auth:{getUserProfileLink:s}}=reactExports.useContext(SiteConfigContext),t=s(e);return jsxRuntimeExports.jsxs(StatsItems,{children:[jsxRuntimeExports.jsx(StatsItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Followers"}),value:e.followers_count||0,link:`${t}/followers`}),jsxRuntimeExports.jsx(StatsItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Following"}),value:e.followed_users_count||0,link:`${t}/following`}),jsxRuntimeExports.jsx(StatsItem,{label:jsxRuntimeExports.jsx(Trans,{message:"Lists"}),value:e.lists_count||0,link:`${t}/lists`})]})}function StatsItems(e){const s=reactExports.Children.toArray(e.children);return jsxRuntimeExports.jsx("div",{className:"flex items-center",children:s.map((t,n)=>jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[t,n<s.length-1&&jsxRuntimeExports.jsx("div",{className:"h-34 w-1 bg-divider mx-10"})]},n))})}function StatsItem({label:e,value:s,link:t}){return jsxRuntimeExports.jsxs(Link,{to:t,className:"block text-center group",children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-bold",children:jsxRuntimeExports.jsx(FormattedNumber,{value:s})}),jsxRuntimeExports.jsx("div",{className:"text-xs text-muted uppercase group-hover:text-primary transition-colors",children:e})]})}function RemoteFavicon({url:e,className:s,size:t="w-16 h-16",alt:n}){if(!e)return null;const i=getFaviconSrc(e);return jsxRuntimeExports.jsx("img",{className:clsx(t,s),src:getFaviconSrc(e),alt:n||`${i} favicon`})}const getFaviconSrc=memoize(e=>e.includes("youtube")?"https://www.youtube.com/s/desktop/ca54e1bd/img/favicon.ico":(isAbsoluteUrl(e)||(e=`${window.location.protocol}//${window.location.host}`),"https://www.google.com/s2/favicons?domain="+new URL(e).origin));function ProfileLinks({links:e,className:s}){return e!=null&&e.length?e.length===1?jsxRuntimeExports.jsxs("a",{className:"flex items-center max-md:justify-center gap-6 mt-24 md:mt-12 hover:text-primary transition-colors",href:e[0].url,children:[jsxRuntimeExports.jsx(OpenInNewIcon,{className:"text-muted",size:"sm"}),jsxRuntimeExports.jsx("span",{className:"capitalize",children:e[0].title})]}):jsxRuntimeExports.jsx("div",{className:clsx("flex items-center",s),children:e.map(t=>jsxRuntimeExports.jsx(Tooltip,{label:t.title,children:jsxRuntimeExports.jsx(ButtonBase,{elementType:"a",href:t.url,target:"_blank",rel:"noreferrer",children:jsxRuntimeExports.jsx(RemoteFavicon,{url:t.url,alt:t.title,size:"w-20 h-20"})})},t.url))}):null}function ProfilePageHeader({user:e}){const{user:s}=useAuth();return jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-24",children:[jsxRuntimeExports.jsx(UserAvatar,{user:e,circle:!0,size:"w-140 h-140"}),jsxRuntimeExports.jsxs("div",{className:"flex-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-8 gap-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold",children:e.display_name}),e.is_pro&&jsxRuntimeExports.jsx(Chip,{size:"xs",color:"primary",radius:"rounded",className:"mt-2",children:jsxRuntimeExports.jsx(Trans,{message:"PRO"})})]}),jsxRuntimeExports.jsx(ProfileDescription,{profile:e.profile}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-14 mt-12",children:[(s==null?void 0:s.id)!==e.id&&jsxRuntimeExports.jsx(FollowButton,{variant:"outline",color:"primary",size:"xs",user:e}),(s==null?void 0:s.id)===e.id&&jsxRuntimeExports.jsx(EditButton,{user:e})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(ProfileStatsList,{user:e}),jsxRuntimeExports.jsx(ProfileLinks,{links:e.links,className:"flex-shrink-0 ml-auto mt-12"})]})]})}function EditButton({user:e}){return jsxRuntimeExports.jsxs(DialogTrigger,{type:"modal",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"xs",startIcon:jsxRuntimeExports.jsx(EditIcon,{}),children:jsxRuntimeExports.jsx(Trans,{message:"Edit profile"})}),jsxRuntimeExports.jsx(EditUserProfileDialog,{user:e})]})}const PageTabs=[{uri:"",label:message("Lists")},{uri:"ratings",label:message("Ratings")},{uri:"reviews",label:message("Reviews")},{uri:"comments",label:message("Comments")},{uri:"followers",label:message("Followers")},{uri:"followed-users",label:message("Following")}];function UserProfilePage(){const e=useUserProfile(),s=e.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:e}),jsxRuntimeExports.jsx(PageContent$1,{user:e.data.user})]}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"});return jsxRuntimeExports.jsx(SitePageLayout,{children:s})}function PageContent$1({user:e}){return jsxRuntimeExports.jsxs("div",{className:"container mx-auto mt-24 md:mt-40 px-14 md:px-24",children:[jsxRuntimeExports.jsx(ProfilePageHeader,{user:e}),jsxRuntimeExports.jsx(ProfileTabs,{user:e})]})}function ProfileTabs({user:e}){const{auth:{getUserProfileLink:s}}=reactExports.useContext(SiteConfigContext),t=s(e),{pathname:n}=useLocation(),i=n.split("/").pop();let a=PageTabs.findIndex(o=>o.uri===i);return a===-1&&(a=0),jsxRuntimeExports.jsxs(Tabs,{className:"mt-34",selectedTab:a,children:[jsxRuntimeExports.jsx(TabList,{children:PageTabs.map(o=>jsxRuntimeExports.jsx(Tab,{width:"min-w-132",elementType:Link,to:`${t}/${o.uri}`,replace:!0,children:jsxRuntimeExports.jsx(Trans,{...o.label})},o.uri))}),jsxRuntimeExports.jsx("div",{className:"mt-24",children:jsxRuntimeExports.jsx(Outlet,{})})]})}function ProfileListsPanel(){const s=useUserProfile().data.user,t=useProfileLists();return t.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{imageHeight:"h-auto",imageMargin:"mb-14",image:jsxRuntimeExports.jsx(ListAltIcon,{className:"text-muted"}),size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"No lists yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Follow :user for updates on lists they create in the future.",values:{user:s.display_name}})}):t.data?jsxRuntimeExports.jsxs("div",{children:[t.items.map(n=>jsxRuntimeExports.jsx(UserListIndexItem,{list:n,user:s,showVisibility:!1},n.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:t})]}):jsxRuntimeExports.jsx(PageStatus,{query:t})}function useProfileRatings(){const{userId:e="me"}=useParams();return useInfiniteData({endpoint:`user-profile/${e}/ratings`,queryKey:["reviews","profile-page-ratings",e],paginate:"simple"})}function EpisodePortraitGridItem({item:e,title:s,rating:t}){return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(EpisodePoster,{episode:e,title:s,srcSize:"lg",aspect:"aspect-poster",showPlayButton:!0}),jsxRuntimeExports.jsxs("div",{className:"mt-10 text-sm",children:[jsxRuntimeExports.jsx(TitleRating,{score:t??e.rating,className:"mb-4"}),jsxRuntimeExports.jsx(TitleLinkWithEpisodeNumber,{title:s,episode:e,className:"block font-medium text-base"})]})]})}function ProfileRatingsPanel(){const s=useUserProfile().data.user,t=useProfileRatings();return t.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{imageHeight:"h-auto",imageMargin:"mb-14",image:jsxRuntimeExports.jsx(StarIcon,{className:"text-muted"}),size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"No ratings yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Follow :user for updates on titles they rate in the future.",values:{user:s.display_name}})}):t.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(ContentGridLayout,{variant:"portrait",children:t.items.map(n=>{const i=n.reviewable;return i.model_type==="episode"?jsxRuntimeExports.jsx(EpisodePortraitGridItem,{item:i,title:i.title,rating:n.score},n.id):jsxRuntimeExports.jsx(TitlePortraitGridItem,{item:n.reviewable,rating:n.score},n.id)})}),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:t})]}):jsxRuntimeExports.jsx(PageStatus,{query:t})}function useProfileReviews(){const{userId:e="me"}=useParams();return useInfiniteData({endpoint:`user-profile/${e}/reviews`,queryKey:["reviews","profile-page-reviews",e],paginate:"simple"})}function ProfileReviewsPanel(){const s=useUserProfile().data.user,t=useProfileReviews();return t.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{imageHeight:"h-auto",imageMargin:"mb-14",image:jsxRuntimeExports.jsx(RateReviewIcon,{className:"text-muted"}),size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"No reviews yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Follow :user for updates on titles they review in the future.",values:{user:s.display_name}})}):t.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[t.items.map(n=>jsxRuntimeExports.jsx(ReviewListItem,{review:n},n.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:t})]}):jsxRuntimeExports.jsx(PageStatus,{query:t})}function ReviewListItem({review:e}){const s=e.helpful_count+e.not_helpful_count,t=e.reviewable,n=t.model_type==="episode"?t.title:t;return jsxRuntimeExports.jsxs("div",{className:"mb-24 flex items-start gap-24 border-b pb-24",children:[jsxRuntimeExports.jsx(TitlePoster,{title:n,size:"w-90",srcSize:"sm"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold",children:t.model_type==="episode"?jsxRuntimeExports.jsx(TitleLinkWithEpisodeNumber,{title:n,episode:t,target:"_blank"}):jsxRuntimeExports.jsx(TitleLink,{title:n,target:"_blank"})}),jsxRuntimeExports.jsx(TitleRating,{className:"mb-8 mt-14",score:e.score}),jsxRuntimeExports.jsx("div",{className:"text-base font-semibold",children:e.title}),jsxRuntimeExports.jsx("p",{className:"mt-10 whitespace-pre-line text-sm",children:e.body}),s?jsxRuntimeExports.jsx("div",{className:"mt-12 text-xs text-muted",children:jsxRuntimeExports.jsx(Trans,{message:":helpfulCount out of :total people found this helpful.",values:{helpfulCount:e.helpful_count,total:e.helpful_count+e.not_helpful_count}})}):null]})]})}function useProfileComments(){const{userId:e="me"}=useParams();return useInfiniteData({endpoint:`user-profile/${e}/comments`,queryKey:["comment","profile-page-comments",e],paginate:"simple"})}function ProfileCommentsPanel(){const s=useUserProfile().data.user,t=useProfileComments();return t.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{imageHeight:"h-auto",imageMargin:"mb-14",image:jsxRuntimeExports.jsx(RateReviewIcon,{className:"text-muted"}),size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"No comments yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Follow :user for updates on comments they post in the future.",values:{user:s.display_name}})}):t.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[t.items.map(n=>jsxRuntimeExports.jsx(CommentListItem,{comment:n},n.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:t})]}):jsxRuntimeExports.jsx(PageStatus,{query:t})}function CommentListItem({comment:e}){const s=e.commentable,t=s.model_type==="episode"?s.title:s;return jsxRuntimeExports.jsxs("div",{className:"mb-24 flex items-start gap-24 border-b pb-24",children:[jsxRuntimeExports.jsx(TitlePoster,{title:t,size:"w-90",srcSize:"sm"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-semibold",children:s.model_type==="episode"?jsxRuntimeExports.jsx(TitleLinkWithEpisodeNumber,{title:t,episode:s,target:"_blank"}):jsxRuntimeExports.jsx(TitleLink,{title:t,target:"_blank"})}),jsxRuntimeExports.jsx("time",{className:"mt-12 block text-xs text-muted",children:jsxRuntimeExports.jsx(FormattedRelativeTime,{date:e.created_at})}),jsxRuntimeExports.jsx("p",{className:"mt-8 whitespace-pre-line text-sm",children:e.content}),e.upvotes?jsxRuntimeExports.jsxs("div",{className:"mt-12 flex items-center gap-8 text-muted",children:[jsxRuntimeExports.jsx(ThumbUpIcon,{size:"sm"}),jsxRuntimeExports.jsx("div",{children:e.upvotes})]}):null]})]})}function useProfileFollowers(){const{userId:e="me"}=useParams();return useInfiniteData({endpoint:`users/${e}/followers`,queryKey:["users","profile-page-followers",e],paginate:"simple"})}function FollowerListItem({follower:e}){return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-16 mb-16 pb-16 border-b",children:[jsxRuntimeExports.jsx(UserAvatar,{user:e,size:"lg"}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx(UserProfileLink,{user:e}),e.followers_count&&e.followers_count>0?jsxRuntimeExports.jsx("div",{className:"text-xs text-muted",children:jsxRuntimeExports.jsx(Trans,{message:"[one 1 followers|other :count followers]",values:{count:e.followers_count}})}):null]}),jsxRuntimeExports.jsx(FollowButton,{variant:"outline",size:"xs",className:"ml-auto",user:e})]},e.id)}function ProfileFollowersPanel(){const s=useUserProfile().data.user,t=useProfileFollowers();return t.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{imageHeight:"h-auto",imageMargin:"mb-14",image:jsxRuntimeExports.jsx(BookmarkBorderIcon,{className:"text-muted"}),size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"No followers yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Be the first to follow :name.",values:{name:s.display_name}})}):t.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[t.items.map(n=>jsxRuntimeExports.jsx(FollowerListItem,{follower:n},n.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:t})]}):jsxRuntimeExports.jsx(PageStatus,{query:t})}function useProfileFollowedUsers(){const{userId:e="me"}=useParams();return useInfiniteData({endpoint:`users/${e}/followed-users`,queryKey:["users","profile-page-followed-users",e],paginate:"simple"})}function ProfileFollowedUsersPanel(){const s=useUserProfile().data.user,t=useProfileFollowedUsers();return t.noResults?jsxRuntimeExports.jsx(IllustratedMessage,{imageHeight:"h-auto",imageMargin:"mb-14",image:jsxRuntimeExports.jsx(BookmarkBorderIcon,{className:"text-muted"}),size:"sm",title:jsxRuntimeExports.jsx(Trans,{message:"Not following anyone yet"}),description:jsxRuntimeExports.jsx(Trans,{message:"Check back later to see users :user is following.",values:{user:s.display_name}})}):t.data?jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[t.items.map(n=>jsxRuntimeExports.jsx(FollowerListItem,{follower:n},n.id)),jsxRuntimeExports.jsx(InfiniteScrollSentinel,{query:t})]}):jsxRuntimeExports.jsx(PageStatus,{query:t})}function SearchPage(){const{query:e}=useParams(),s=useSearchResults("searchPage",e);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(PageMetaTags,{query:s}),jsxRuntimeExports.jsx(SitePageLayout,{children:jsxRuntimeExports.jsx("section",{className:"container mx-auto mt-24 px-14 md:mt-40 md:px-24",children:jsxRuntimeExports.jsxs("main",{children:[jsxRuntimeExports.jsx(MobileSearchBar,{}),jsxRuntimeExports.jsx(PageContent,{query:s})]})})})]})}function MobileSearchBar(){const{searchQuery:e=""}=useParams(),s=useNavigate(),{trans:t}=useTrans();return jsxRuntimeExports.jsx(TextField,{defaultValue:e,onChange:n=>{s(`/search/${n.target.value}`,{replace:!0})},autoFocus:!0,className:"w-full md:hidden",size:"lg",placeholder:t(message("Search..."))})}function PageContent({query:e}){const{branding:s}=useSettings();return e.data?jsxRuntimeExports.jsx(SearchResults,{query:e}):e.fetchStatus==="idle"?jsxRuntimeExports.jsx(IllustratedMessage,{className:"mt-40",image:jsxRuntimeExports.jsx(SearchIcon,{size:"xl"}),imageHeight:"h-auto",imageMargin:"mb-12",title:jsxRuntimeExports.jsx(Trans,{message:"Search :siteName",values:{siteName:s.site_name}}),description:jsxRuntimeExports.jsx(Trans,{message:"Find movies, tv series, people and more."})}):jsxRuntimeExports.jsx(PageStatus,{query:e,loaderClassName:"absolute inset-0 m-auto"})}function SearchResults({query:e}){const{query:s}=useParams(),{movies:t,series:n,people:i}=reactExports.useMemo(()=>{var l;const a=[],o=[],x=[];return(l=e.data)==null||l.results.forEach(c=>{c.model_type===TITLE_MODEL&&c.is_series?o.push(c):c.model_type===TITLE_MODEL&&!c.is_series?a.push(c):c.model_type===PERSON_MODEL&&x.push(c)}),{movies:a,series:o,people:x}},[e]);return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsx(SiteSectionHeading,{className:"my-24 md:mb-48",headingType:"h1",fontSize:"text-xl md:text-3xl",hideBorder:!0,children:jsxRuntimeExports.jsx(Trans,{message:"Search results for: :query",values:{query:s}})}),t.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontSize:"text-2xl",children:jsxRuntimeExports.jsx(Trans,{message:"Movies"})}),jsxRuntimeExports.jsx(ContentGrid,{content:t,variant:"portrait"})]}),n.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontSize:"text-2xl",children:jsxRuntimeExports.jsx(Trans,{message:"Series"})}),jsxRuntimeExports.jsx(ContentGrid,{content:n,variant:"portrait"})]}),i.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-48",children:[jsxRuntimeExports.jsx(SiteSectionHeading,{fontSize:"text-2xl",children:jsxRuntimeExports.jsx(Trans,{message:"People"})}),jsxRuntimeExports.jsx(ContentGrid,{content:i,variant:"portrait"})]})]})}const RouteConfig=[{index:!0,element:jsxRuntimeExports.jsx(HomepageChannelPage,{})},{path:"search",element:jsxRuntimeExports.jsx(SearchPage,{})},{path:"search/:query",element:jsxRuntimeExports.jsx(SearchPage,{})},{path:"watch/:videoId",element:jsxRuntimeExports.jsx(WatchPage,{})},{path:"/titles/:titleId/:titleSlug",element:jsxRuntimeExports.jsx(TitlePage,{})},{path:"/titles/:titleId/:titleSlug/videos",element:jsxRuntimeExports.jsx(TitleVideosPage,{})},{path:"/titles/:titleId/:titleSlug/images",element:jsxRuntimeExports.jsx(TitleImagesPage,{})},{path:"/titles/:titleId/:titleSlug/full-credits",element:jsxRuntimeExports.jsx(TitleFullCreditsPage,{})},{path:"/titles/:titleId/:titleSlug/season/:season",element:jsxRuntimeExports.jsx(SeasonPage,{})},{path:"/titles/:titleId/:titleSlug/season/:season/episode/:episode",element:jsxRuntimeExports.jsx(EpisodePage,{})},{path:"/titles/:titleId/:titleSlug/season/:season/episode/:episode/full-credits",element:jsxRuntimeExports.jsx(EpisodeFullCreditsPage,{})},{path:"/people/:personId",element:jsxRuntimeExports.jsx(PersonPage,{})},{path:"/people/:personId/:personSlug",element:jsxRuntimeExports.jsx(PersonPage,{})},{path:"/news/:articleId",element:jsxRuntimeExports.jsx(NewsArticlePage,{})},{path:"user/:userId/:slug",element:jsxRuntimeExports.jsx(UserProfilePage,{}),children:[{index:!0,element:jsxRuntimeExports.jsx(ProfileListsPanel,{})},{path:"ratings",element:jsxRuntimeExports.jsx(ProfileRatingsPanel,{})},{path:"reviews",element:jsxRuntimeExports.jsx(ProfileReviewsPanel,{})},{path:"comments",element:jsxRuntimeExports.jsx(ProfileCommentsPanel,{})},{path:"followers",element:jsxRuntimeExports.jsx(ProfileFollowersPanel,{})},{path:"followed-users",element:jsxRuntimeExports.jsx(ProfileFollowedUsersPanel,{})}]},{path:"user/:userId/:slug/:tab",element:jsxRuntimeExports.jsx(UserProfilePage,{})},{path:"/lists",element:jsxRuntimeExports.jsx(AuthRoute,{children:jsxRuntimeExports.jsx(UserListsIndexPage,{})})},{path:"/lists/new",element:jsxRuntimeExports.jsx(AuthRoute,{children:jsxRuntimeExports.jsx(SitePageLayout,{children:jsxRuntimeExports.jsx(CreateUserListPage,{})})})},{path:"/lists/:slugOrId",element:jsxRuntimeExports.jsx(ChannelPage,{type:"list"})},{path:"/lists/:slugOrId/edit",element:jsxRuntimeExports.jsx(SitePageLayout,{children:jsxRuntimeExports.jsx(EditUserListPage,{})})},{path:":slugOrId",element:jsxRuntimeExports.jsx(ChannelPage,{})},{path:"channel/:slugOrId",element:jsxRuntimeExports.jsx(ChannelPage,{})},{path:":slugOrId/:restriction",element:jsxRuntimeExports.jsx(ChannelPage,{})},{path:"channel/:slugOrId/:restriction",element:jsxRuntimeExports.jsx(ChannelPage,{})},{path:"*",element:jsxRuntimeExports.jsx(NotFoundPage,{})}];function HomepageChannelPage(){const{homepage:e}=useSettings();let s="homepage";return(e==null?void 0:e.type)==="channel"&&e.value&&(s=e.value),jsxRuntimeExports.jsx(ChannelPage,{slugOrId:s})}function SiteRoutes(){return useRoutes(RouteConfig)}export{SiteRoutes as default};
//# sourceMappingURL=site-routes-c9ed4ea0.js.map
